import{u as F}from"./useQuery-D3pHsC49.js";import{d as L,z as O,r as J,b as i,o,c as n,a as _,e as t,w as a,F as D,p as T,h as $,g as B,t as N,f as s,n as M,i as j,k as S,u as X,A as z}from"./index-CmTIu2SI.js";import{S as Y}from"./SkillService-DnX8UsJh.js";import{_ as Z}from"./logo-trY1JmHw.js";import{_ as E}from"./AvatarPlaceholder.vue_vue_type_script_setup_true_lang-DqT-h7sm.js";import{_ as ee}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-BT_DqjWZ.js";import{P as te}from"./ProfileService-BKm1NQj5.js";import{u as K}from"./course-content-store-BCe247Ru.js";import"./api-client-_2bmHwbl.js";import"./base-url-qR72hEjy.js";const oe={class:"bg-indigo",color:"white"},se={class:"mx-auto flex items-center justify-between p-2 px-8 border-b","aria-label":"Global"},ne={class:"flex flex-1"},re=_("span",{class:"sr-only"},"Artisan",-1),ae=_("img",{class:"h-8 pr-4",alt:"Artisan Logo",src:Z},null,-1),ie=_("span",{class:"text-2xl font-semibold whitespace-nowrap"}," Artisan ",-1),le={class:"flex items-center"},ce={class:"d-flex bg-grey-lighten-5 rounded-lg h-10 px-2 py-1 ml-2 items-center gap-1"},de={class:"flex flex-1 justify-end items-center"},ue={key:0},_e={key:1},pe={key:0,class:"overflow-hidden w-10 h-10 rounded-full"},me=L({__name:"CourseHeader",setup(U){const h=K(),{activeStepIndex:g,currentSteps:q,courseInfo:x,activeTopicIndex:P}=O(h),{changeStep:k,changeTopic:V}=h,p=J(!1),{isPending:w,isError:l,data:y}=F({queryKey:["user/profile"],queryFn:async()=>await te.getUserProfile()});function I(c){switch(c){case"code":return"mdi-xml";case"picode":return"mdi-code-json";case"scq":return"mdi-checkbox-marked-circle-outline";case"mcq":return"mdi-checkbox-multiple-marked-outline";case"video":return"mdi-play-circle-outline";default:return"mdi-text-box-outline"}}function A(c,m){return m?"bg-orange":c=="completed"?"bg-green":c=="attempted"?"bg-yellow":c=="accessed"?"bg-grey-lighten-2":"bg-zinc-200"}return(c,m)=>{const e=i("RouterLink"),f=i("v-icon"),d=i("v-btn"),u=i("v-list-subheader"),v=i("v-list-item"),G=i("v-list"),H=i("v-menu"),Q=i("v-tooltip"),W=i("v-img");return o(),n("header",oe,[_("nav",se,[_("div",ne,[t(e,{to:"/",class:"flex"},{default:a(()=>[re,ae,ie]),_:1})]),_("div",le,[_("div",null,[t(d,{icon:"",density:"comfortable",variant:"text"},{default:a(()=>[t(f,{icon:p.value?"mdi-close":"mdi-menu"},null,8,["icon"])]),_:1}),t(H,{activator:"parent",modelValue:p.value,"onUpdate:modelValue":m[0]||(m[0]=r=>p.value=r),offset:[8,0]},{default:a(()=>[(o(!0),n(D,null,T(s(x).modules,(r,b)=>(o(),$(G,{key:r.id,value:b},{default:a(()=>[t(u,null,{default:a(()=>[B(N(r.name),1)]),_:2},1024),(o(!0),n(D,null,T(r.topics,(C,R)=>(o(),$(v,{key:C.id,title:C.name,value:C.name,"active-color":"indigo",active:R==s(P),onClick:ye=>s(V)(b,R)},null,8,["title","value","active","onClick"]))),128))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_("div",ce,[(o(!0),n(D,null,T(s(q),(r,b)=>(o(),$(d,{key:r.id,variant:"text",density:"compact",icon:"",class:M(A(r.progress,s(g)===b)),size:"24",onClick:C=>s(k)(b)},{default:a(()=>[t(f,{icon:I(r.category),size:"18"},null,8,["icon"]),t(Q,{activator:"parent",location:"top"},{default:a(()=>[B(N(`${r.name}`),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))])]),_("div",de,[t(d,{href:"https://code.artisan.education",color:"secondary",flat:"","prepend-icon":"mdi-developer-board","append-icon":"mdi-chevron-right",target:"_blank",rel:"noopener noreferrer"},{default:a(()=>[B("IDE")]),_:1}),t(ee),t(e,{to:"/profile"},{default:a(()=>[t(d,{icon:"",variant:"flat",class:"pa-0"},{default:a(()=>[s(w)||s(l)?(o(),n("div",ue,[t(E)])):s(y)?(o(),n("div",_e,[s(y).image!=null?(o(),n("div",pe,[t(W,{src:s(y).image,cover:""},null,8,["src"])])):(o(),$(E,{key:1}))])):j("",!0)]),_:1})]),_:1})])])])}}}),fe={class:"flex flex-col w-full bg-white"},ve={key:0},he={key:1},ge={key:2,class:"flex-column h-full"},Ie=L({__name:"CourseContentView",setup(U){const h=K(),{introIndex:g}=O(h),{setCourseInfo:q,setActives:x,setDashboardIDs:P}=h,k=S(()=>l.query.dashboard_topic_id||null),V=S(()=>parseInt(k.value??"-1")),p=S(()=>l.query.dashboard_step_order||null),w=S(()=>parseInt(p.value??"-1")),l=X(),{isPending:y,isError:I,data:A,error:c}=F({queryKey:[`skill/${l.params.id}`,l.query.dashboard_step_id,l.query.dashboard_step_order],queryFn:async()=>{const e=await Y.getCourseInfoByID(l.params.id.toString());return P(l.query.dashboard_step_id||null,w.value),q(e),m(e),e},refetchOnWindowFocus:!1});async function m(e){var d;const f=k.value!=null?V.value:e.last_accessed_topic.id;for(let u=0;u<e.modules.length;u++){if(g.value!=null){x(u,g.value,0),z.replace({path:`/course/${e.id}/topic/${e.modules[u].topics[g.value].id}`});return}for(let v=0;v<e.modules[u].topics.length;v++)if(f==e.modules[u].topics[v].id){x(u,v,(p.value!=null?w.value:((d=e.last_accessed_topic.last_accessed_step)==null?void 0:d.order)??1)-1),z.replace({path:`/course/${e.id}/topic/${f}`});return}}}return(e,f)=>{const d=i("RouterView");return o(),n("div",fe,[s(y)?(o(),n("div",ve," Pending... ")):s(I)?(o(),n("div",he,N(s(c)),1)):s(A)?(o(),n("div",ge,[t(me),t(d)])):j("",!0)])}}});export{Ie as default};
