import{u as k}from"./course-content-store-Dc7O_ztl.js";import{u as x}from"./useQuery-DUanmItu.js";import{S as B}from"./SkillService-BegbNOfY.js";import{d as V,u as b,z as D,r as R,m as I,B as N,f as o,c as n,t as P,a as T,e as $,i as q,b as A,o as c,A as E}from"./index-D_KheEFR.js";import"./api-client-B58bgvt1.js";import"./base-url-qR72hEjy.js";const j={key:0,class:"p-8"},z={key:1},F={key:2,class:"flex h-full w-full"},K={class:"flex-1 flex flex-col justify-between items-center pt-8"},M=V({__name:"CourseTopicView",setup(O){const r=b(),i=k(),{currentStepProgress:u,isStepChange:l,dashboardStepID:p,dashboardStepOrder:d}=D(i),{setSteps:_,setActives:m,resetIsStepChange:f}=i,t=R(""),{isPending:v,isError:h,data:S,error:y,refetch:g}=x({queryKey:["topic",t],queryFn:C});async function C(){var s;const e=await B.getTopicByID(t.value);if(_(e.steps),!l.value){const a=e.last_accessed_step!=null?e.last_accessed_step.id:e.steps[0].id,w=p.value!=null?d.value:((s=e.last_accessed_step)==null?void 0:s.order)??1;m(null,null,w-1),E.replace({path:`/course/${r.params.id}/topic/${t.value}/step/${p.value??a}`})}return e}return I([()=>r.params.topic_id,()=>u.value],([e,s])=>{t.value=r.params.topic_id.toString(),g()},{immediate:!0}),N(()=>{f()}),(e,s)=>{const a=A("RouterView");return o(v)?(c(),n("div",j," Pending... ")):o(h)?(c(),n("div",z,P(o(y)),1)):o(S)?(c(),n("div",F,[T("div",K,[$(a)])])):q("",!0)}}});export{M as default};
