import{d as F,r as x,e as a,o as y,c as V,f as e,g as t,h as r,t as u,F as I,q as B,w as L,v as D,_ as Q,n as q,a as $,l as S,i as N}from"./index-bKl0pGhK.js";import{a as K,u as T}from"./useQuery-BVppjxiX.js";import{C as h,u as E}from"./dashboard-store-C2Dcao5r.js";import"./api-client-DOMkBDN8.js";import"./base-url-qR72hEjy.js";const P=F({__name:"DeleteClassFormDialog",props:{item:{}},setup(C){const s=C,n=x(!1),i=x(!1),_=K();async function c(){i.value=!0;try{await h.deleteClass(s.item.id.toString()),_.invalidateQueries({queryKey:["classes"]}),n.value=!1}catch(m){alert(`failedToDeleteClass: ${m}`)}finally{i.value=!1}}return(m,l)=>{const o=a("v-btn"),d=a("v-card-title"),v=a("v-card-text"),p=a("v-card"),f=a("v-card-actions"),g=a("v-dialog");return y(),V(I,null,[e(o,{"prepend-icon":"mdi-delete",variant:"plain",loading:i.value,disabled:i.value,onClick:l[0]||(l[0]=()=>{n.value=!0})},{default:t(()=>[r("Remove")]),_:1},8,["loading","disabled"]),e(g,{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=b=>n.value=b),"max-width":"600"},{default:t(()=>[e(p,{class:"pa-4"},{default:t(()=>[e(d,{class:"px-2"},{default:t(()=>[r(u("deleteStudent")+"?")]),_:1}),e(p,{class:"ma-2",color:"yellow",variant:"tonal"},{default:t(()=>[e(v,{class:"text-medium-emphasis text-lg"},{default:t(()=>[r(u("warningAllHisProgressDataWillBeRemovedPermanently"))]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(o,{color:"green darken-1",variant:"text",onClick:l[1]||(l[1]=b=>n.value=!1)},{default:t(()=>[r(u("cancel"))]),_:1}),e(o,{loading:i.value,color:"red",variant:"flat",disabled:i.value,onClick:l[2]||(l[2]=b=>c())},{default:t(()=>[r(u("delete"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),R=F({__name:"UpdateClassFormDialog",props:{item:{}},setup(C){const s=C,n=x(!1),i=x(!1),_=K(),c=x({name:s.item.name}),m=B(()=>c.value.name),l=async()=>{if(!m.value)return alert("pleaseFillInAllFields");i.value=!0;try{await h.updateClass(s.item.id.toString(),c.value.name),_.invalidateQueries({queryKey:["classes"]}),n.value=!1}catch(o){alert(`failedToUpdateStudent: ${o}`)}finally{i.value=!1}};return L(n,o=>{o&&(c.value.name=s.item.name)}),(o,d)=>{const v=a("v-btn"),p=a("v-card-title"),f=a("v-text-field"),g=a("v-form"),b=a("v-card-text"),U=a("v-card-actions"),A=a("v-card"),k=a("v-dialog");return y(),V(I,null,[e(v,{"prepend-icon":"mdi-pencil",variant:"plain",onClick:d[0]||(d[0]=w=>n.value=!0)},{default:t(()=>[r("Edit")]),_:1}),e(k,{modelValue:n.value,"onUpdate:modelValue":d[3]||(d[3]=w=>n.value=w),"max-width":"600"},{default:t(()=>[e(A,{class:"pa-4"},{default:t(()=>[e(p,{class:"px-2"},{default:t(()=>[r(u("updateStudent"))]),_:1}),e(b,null,{default:t(()=>[e(g,{onSubmit:D(l,["prevent"])},{default:t(()=>[e(f,{modelValue:c.value.name,"onUpdate:modelValue":d[1]||(d[1]=w=>c.value.name=w),type:"text",density:"compact",label:"name",placeholder:"name","prepend-inner-icon":"mdi-account-outline",variant:"outlined",required:""},null,8,["modelValue"])]),_:1})]),_:1}),e(U,null,{default:t(()=>[e(v,{color:"red darken-1",variant:"text",onClick:d[2]||(d[2]=w=>n.value=!1)},{default:t(()=>[r(u("cancel"))]),_:1}),e(v,{loading:i.value,color:"primary",variant:"flat",disabled:!m.value||i.value,onClick:l},{default:t(()=>[r(u("save"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),j=Q(R,[["__scopeId","data-v-26cdee02"]]),H={class:"text-body-1"},M={class:"flex items-center"},W={class:"text-body-1"},z={style:{color:"blue"}},G=F({__name:"ClassCard",props:{item:{}},setup(C){const s=C,n=B(()=>s.item);return(i,_)=>{const c=a("v-icon"),m=a("v-card-title"),l=a("v-spacer"),o=a("v-list-item"),d=a("v-list"),v=a("v-menu"),p=a("v-btn"),f=a("v-card");return y(),q(f,{to:`/dashboard/class/${s.item.id}`,class:"d-flex flex pa-2 mb-2 border-sm rounded-lg",variant:"flat",link:""},{default:t(()=>[e(m,null,{default:t(()=>{var g;return[r(u(s.item.name)+" ",1),e(c,{color:"success",icon:"mdi mdi-circle-small"}),$("span",H,u(((g=s.item.students)==null?void 0:g.length)??0)+" students",1)]}),_:1}),e(l),$("div",M,[$("div",W,[r(" class code: "),$("span",z,u(s.item.code),1)])]),e(p,{variant:"flat",icon:"",class:"pa-0",onClick:D(()=>{},["prevent"])},{default:t(()=>[e(c,null,{default:t(()=>[r("mdi-dots-vertical")]),_:1}),e(v,{activator:"parent"},{default:t(()=>[e(d,{onClick:_[0]||(_[0]=D(()=>{},["stop"]))},{default:t(()=>[e(o,{class:"pa-0"},{default:t(()=>[e(j,{item:n.value},null,8,["item"])]),_:1}),e(o,{class:"pa-0"},{default:t(()=>[e(P,{item:n.value},null,8,["item"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["to"])}}}),J=Q(G,[["__scopeId","data-v-04f17012"]]),O=F({__name:"AddClassFormDialog",setup(C){const s=x(!1),n=x(!1),i=K(),_=x({name:""}),c=B(()=>_.value.name),m=async()=>{if(!c.value)return alert("pleaseFillInAllFields");n.value=!0;try{await h.addClass(_.value.name),i.invalidateQueries({queryKey:["classes"]}),s.value=!1}catch(l){alert(`failedToAddClass: ${l}`)}finally{n.value=!1}};return L(s,l=>{l==!1&&(_.value={name:""})}),(l,o)=>{const d=a("v-btn"),v=a("v-card-title"),p=a("v-text-field"),f=a("v-form"),g=a("v-card-text"),b=a("v-card-actions"),U=a("v-card"),A=a("v-dialog");return y(),V("div",null,[e(d,{color:"green",variant:"flat",onClick:o[0]||(o[0]=k=>s.value=!0)},{default:t(()=>[r(" + "+u(l.$t("add")),1)]),_:1}),e(A,{modelValue:s.value,"onUpdate:modelValue":o[3]||(o[3]=k=>s.value=k),"max-width":"600"},{default:t(()=>[e(U,{class:"pa-4"},{default:t(()=>[e(v,{class:"px-2"},{default:t(()=>[r(u("createNewClass"))]),_:1}),e(g,null,{default:t(()=>[e(f,{onSubmit:D(m,["prevent"])},{default:t(()=>[e(p,{modelValue:_.value.name,"onUpdate:modelValue":o[1]||(o[1]=k=>_.value.name=k),type:"text",density:"compact",label:"name",placeholder:l.$t("name"),"prepend-inner-icon":"mdi-pencil",variant:"outlined",required:""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(d,{color:"red darken-1",variant:"text",onClick:o[2]||(o[2]=k=>s.value=!1)},{default:t(()=>[r(u("cancel"))]),_:1}),e(d,{loading:n.value,color:"primary",variant:"flat",disabled:!c.value||n.value,onClick:m},{default:t(()=>[r(u("create"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),X=Q(O,[["__scopeId","data-v-b9e876fa"]]),Y={class:"flex justify-between"},Z=$("div",{class:"text-h5 pb-6"},"Classes",-1),ee={key:1},te={key:2},de=F({__name:"ClassesView",setup(C){const s=E(),{setClasses:n}=s,{isPending:i,isError:_,data:c,error:m}=T({queryKey:["classes"],queryFn:async()=>{const l=await h.getClasses();return n(l),l}});return(l,o)=>{const d=a("v-skeleton-loader"),v=a("v-col");return y(),q(v,{style:{"min-width":"300px","max-width":"100%"}},{default:t(()=>{var p;return[$("div",Y,[Z,e(X)]),S(i)?(y(),q(d,{key:0,type:"list-item-two-line"})):S(_)?(y(),V("div",ee,u((p=S(m))==null?void 0:p.message),1)):(y(),V("div",te,[(y(!0),V(I,null,N(S(c),f=>(y(),q(J,{key:f.id,item:f},null,8,["item"]))),128))]))]}),_:1})}}});export{de as default};
