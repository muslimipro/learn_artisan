import{u as E}from"./useQuery-DFmdIgVU.js";import{d as L,z as O,r as J,b as i,o as t,c as n,a as u,e as s,w as d,F as T,p as B,h as $,g as R,t as D,f as o,n as M,i as j,k as S,u as X,A as z}from"./index-DsDdy0ek.js";import{S as Y}from"./SkillService-qDffT6aU.js";import{_ as Z}from"./logo-trY1JmHw.js";import{_ as F}from"./AvatarPlaceholder.vue_vue_type_script_setup_true_lang-Dg9AFlS_.js";import{_ as ee}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-CQRWfbmb.js";import{P as te}from"./ProfileService-ByYVQtnm.js";import{u as K}from"./course-content-store-CaZHf6XA.js";import"./api-client-aYpMhgqo.js";import"./base-url-qR72hEjy.js";const oe={class:"bg-indigo",color:"white"},se={class:"mx-auto flex items-center justify-between p-2 px-8 border-b","aria-label":"Global"},ne={class:"flex flex-1"},re=u("span",{class:"sr-only"},"Artisan",-1),ie=u("img",{class:"h-8 pr-4",alt:"Artisan Logo",src:Z},null,-1),ae=u("span",{class:"text-2xl font-semibold whitespace-nowrap"}," Artisan ",-1),le={class:"flex items-center"},ce={class:"d-flex bg-grey-lighten-5 rounded-lg h-10 px-2 py-1 ml-2 items-center gap-1"},de={class:"flex flex-1 justify-end items-center"},ue={key:0},_e={key:1},me={key:0,class:"overflow-hidden w-10 h-10 rounded-full"},pe=L({__name:"CourseHeader",setup(U){const h=K(),{activeStepIndex:g,currentSteps:q,courseInfo:x,activeTopicIndex:P}=O(h),{changeStep:k,changeTopic:V}=h,m=J(!1),{isPending:w,isError:a,data:y}=E({queryKey:["user/profile"],queryFn:async()=>await te.getUserProfile()});function A(l){switch(l){case"code":return"mdi-xml";case"picode":return"mdi-code-json";case"scq":return"mdi-checkbox-marked-circle-outline";case"mcq":return"mdi-checkbox-multiple-marked-outline";case"video":return"mdi-play-circle-outline";default:return"mdi-text-box-outline"}}function I(l,p){return p?"bg-orange":l=="completed"?"bg-green":l=="attempted"?"bg-yellow":l=="accessed"?"bg-grey-lighten-2":"bg-zinc-200"}return(l,p)=>{const e=i("RouterLink"),f=i("v-icon"),_=i("v-btn"),c=i("v-list-subheader"),v=i("v-list-item"),G=i("v-list"),H=i("v-menu"),Q=i("v-tooltip"),W=i("v-img");return t(),n("header",oe,[u("nav",se,[u("div",ne,[s(e,{to:"/",class:"flex"},{default:d(()=>[re,ie,ae]),_:1})]),u("div",le,[u("div",null,[s(_,{icon:"",density:"comfortable",variant:"text"},{default:d(()=>[s(f,{icon:m.value?"mdi-close":"mdi-menu"},null,8,["icon"])]),_:1}),s(H,{activator:"parent",modelValue:m.value,"onUpdate:modelValue":p[0]||(p[0]=r=>m.value=r),offset:[8,0]},{default:d(()=>[(t(!0),n(T,null,B(o(x).modules,(r,b)=>(t(),$(G,{key:r.id,value:b},{default:d(()=>[s(c,null,{default:d(()=>[R(D(r.name),1)]),_:2},1024),(t(!0),n(T,null,B(r.topics,(C,N)=>(t(),$(v,{key:C.id,title:C.name,value:C.name,"active-color":"indigo",active:N==o(P),onClick:ye=>o(V)(b,N)},null,8,["title","value","active","onClick"]))),128))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),u("div",ce,[(t(!0),n(T,null,B(o(q),(r,b)=>(t(),$(_,{key:r.id,variant:"text",density:"compact",icon:"",class:M(I(r.progress,o(g)===b)),size:"24",onClick:C=>o(k)(b)},{default:d(()=>[s(f,{icon:A(r.category),size:"18"},null,8,["icon"]),s(Q,{activator:"parent",location:"top"},{default:d(()=>[R(D(`${r.name}`),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))])]),u("div",de,[s(ee),s(e,{to:"/profile"},{default:d(()=>[s(_,{icon:"",variant:"flat",class:"pa-0"},{default:d(()=>[o(w)||o(a)?(t(),n("div",ue,[s(F)])):o(y)?(t(),n("div",_e,[o(y).image!=null?(t(),n("div",me,[s(W,{src:o(y).image,cover:""},null,8,["src"])])):(t(),$(F,{key:1}))])):j("",!0)]),_:1})]),_:1})])])])}}}),fe={class:"flex flex-col w-full bg-white"},ve={key:0},he={key:1},ge={key:2,class:"flex-column h-full"},Ae=L({__name:"CourseContentView",setup(U){const h=K(),{introIndex:g}=O(h),{setCourseInfo:q,setActives:x,setDashboardIDs:P}=h,k=S(()=>a.query.dashboard_topic_id||null),V=S(()=>parseInt(k.value??"-1")),m=S(()=>a.query.dashboard_step_order||null),w=S(()=>parseInt(m.value??"-1")),a=X(),{isPending:y,isError:A,data:I,error:l}=E({queryKey:[`skill/${a.params.id}`,a.query.dashboard_step_id,a.query.dashboard_step_order],queryFn:async()=>{const e=await Y.getCourseInfoByID(a.params.id.toString());return P(a.query.dashboard_step_id||null,w.value),q(e),p(e),e},refetchOnWindowFocus:!1});async function p(e){var _;const f=k.value!=null?V.value:e.last_accessed_topic.id;for(let c=0;c<e.modules.length;c++){if(g.value!=null){x(c,g.value,0),z.replace({path:`/course/${e.id}/topic/${e.modules[c].topics[g.value].id}`});return}for(let v=0;v<e.modules[c].topics.length;v++)if(f==e.modules[c].topics[v].id){x(c,v,(m.value!=null?w.value:((_=e.last_accessed_topic.last_accessed_step)==null?void 0:_.order)??1)-1),z.replace({path:`/course/${e.id}/topic/${f}`});return}}}return(e,f)=>{const _=i("RouterView");return t(),n("div",fe,[o(y)?(t(),n("div",ve," Pending... ")):o(A)?(t(),n("div",he,D(o(l)),1)):o(I)?(t(),n("div",ge,[s(pe),s(_)])):j("",!0)])}}});export{Ae as default};
