import{u as C}from"./course-content-store-Cg59fHJQ.js";import{u as j}from"./useQuery-3AKXZIqu.js";import{S as q}from"./SkillService-Ci7j-Ev4.js";import{d as B,I as V,e as p,o as s,n as i,g as a,f as h,c as y,i as R,l as t,F as T,G as l,h as u,p as $,k as D,r as E,w as F,t as P,a as z,j as A}from"./index-BgZM2aQb.js";import"./api-client-D6HZLF2T.js";import"./base-url-qR72hEjy.js";const G=B({__name:"StepNavigationBar",setup(N){const _=C(),{activeStepIndex:o,currentSteps:c}=V(_),{changeStep:k}=_;function v(d,n){return n?"bg-orange":d=="completed"?"bg-green":d=="attempted"?"bg-yellow":d=="accessed"?"bg-grey":"bg-zinc-200"}return(d,n)=>{const r=p("v-icon"),w=p("v-btn"),x=p("v-col"),b=p("v-row"),S=p("v-container");return s(),i(S,{class:"d-flex sticky bottom-0 self-start border-y bg-white pa-0 my-0 mx-0"},{default:a(()=>[h(b,{class:"py-2 px-4 ma-0 gap-2"},{default:a(()=>[(s(!0),y(T,null,R(t(c),(g,e)=>(s(),i(x,{key:g.id,class:"d-flex flex-grow-0 align-center pa-0 ma-0"},{default:a(()=>[h(w,{class:l([v(g.progress,t(o)===e),"d-flex align-center justify-center"]),style:{"min-width":"0px","min-height":"100%"},density:"compact",variant:"tonal",onClick:f=>t(k)(e)},{default:a(()=>[t(c)[e].category==="code"?(s(),i(r,{key:0,class:l(t(o)===e?"text-white":"text-black")},{default:a(()=>[u(" mdi-xml ")]),_:2},1032,["class"])):t(c)[e].category==="picode"?(s(),i(r,{key:1,class:l(t(o)===e?"text-white":"text-black")},{default:a(()=>[u(" mdi-code-json ")]),_:2},1032,["class"])):t(c)[e].category==="scq"?(s(),i(r,{key:2,class:l(t(o)===e?"text-white":"text-black")},{default:a(()=>[u(" mdi-checkbox-marked-circle-outline ")]),_:2},1032,["class"])):t(c)[e].category==="mcq"?(s(),i(r,{key:3,class:l(t(o)===e?"text-white":"text-black")},{default:a(()=>[u(" mdi-checkbox-multiple-marked-outline ")]),_:2},1032,["class"])):t(c)[e].category==="video"?(s(),i(r,{key:4,class:l(t(o)===e?"text-white":"text-black")},{default:a(()=>[u(" mdi-play-circle-outline ")]),_:2},1032,["class"])):(s(),i(r,{key:5,class:l(t(o)===e?"text-white":"text-black")},{default:a(()=>[u(" mdi-text-box-outline ")]),_:2},1032,["class"]))]),_:2},1032,["class","onClick"]),e<t(c).length-1?(s(),i(r,{key:0,class:"h-5 w-5","aria-hidden":"true"},{default:a(()=>[u(" mdi-chevron-right ")]),_:1})):$("",!0)]),_:2},1024))),128))]),_:1})]),_:1})}}}),K={key:0,class:"p-8"},L={key:1},Q={key:2,class:"flex h-full w-full"},H={class:"flex-1 flex flex-col justify-between items-center pt-8"},Y=B({__name:"CourseTopicView",setup(N){const _=D(),o=C(),{setSteps:c,setActives:k}=o,{currentStepProgress:v,isStepChange:d}=V(o),n=E(""),{isPending:r,isError:w,data:x,error:b,refetch:S}=j({queryKey:["topic",n],queryFn:g});async function g(){var f;const e=await q.getTopicByID(n.value);if(e.steps.forEach(m=>{console.log(`step.id: ${m.id}, ${m.progress}`)}),c(e.steps),!d.value){const m=e.last_accessed_step!=null?e.last_accessed_step.id:e.steps[0].id;k(null,null,(((f=e.last_accessed_step)==null?void 0:f.order)??1)-1),A.replace({path:`/course/${_.params.id}/topic/${n.value}/step/${m}`})}return e}return F([()=>_.params.topic_id,()=>v.value],([e,f])=>{n.value=_.params.topic_id.toString(),S()},{immediate:!0}),(e,f)=>{const m=p("RouterView");return t(r)?(s(),y("div",K," Pending... ")):t(w)?(s(),y("div",L,P(t(b)),1)):t(x)?(s(),y("div",Q,[z("div",H,[h(m),h(G)])])):$("",!0)}}});export{Y as default};
