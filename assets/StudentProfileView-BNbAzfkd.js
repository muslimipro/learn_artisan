import{u as F}from"./useQuery-BVppjxiX.js";import{S as z}from"./StudentService-CNVpd0wA.js";import{_ as E}from"./AvatarPlaceholder.vue_vue_type_script_setup_true_lang-COMVhYeM.js";import{S as K}from"./SkillsDiagram-V44_6n8K.js";import{_ as R}from"./TokenCard.vue_vue_type_script_setup_true_lang-2Je-0oaF.js";import{S as D}from"./SkillService-Cmv9t3NA.js";import{d as V,q as T,r as N,e as n,o,n as d,g as t,f as e,a as l,c as _,t as i,p as $,l as a,F as I,i as P,z as L,h as j,_ as O,k as Q}from"./index-bKl0pGhK.js";import"./api-client-DOMkBDN8.js";import"./base-url-qR72hEjy.js";const W={class:"relative image-container"},A={key:0,class:"absolute top-0 left-0 bg-yellow-400 text-black px-4 py-1 text-xs font-semibold"},G={class:"text-h5"},H={key:0},J=V({__name:"CourseProgressCard",props:{course:{}},setup(B){const x=B,s=T(()=>x.course),f=N([]);function b(r){return r=="completed"?"bg-green-darken-1":r=="attempted"?"bg-red-darken-1":r=="accessed"?"bg-grey-lighten-1":"bg-grey-lighten-2"}const{isPending:c,data:k}=F({queryKey:["skill",s.value.id],queryFn:async()=>{const r=await D.getCourseInfoByID(s.value.id.toString());for(const w of r.modules)for(const v of w.topics){const u=await D.getTopicByID(v.id.toString());f.value.push(...u.steps)}return console.log(s.value.id),console.log(f),r},refetchOnWindowFocus:!1});return(r,w)=>{const v=n("v-img"),u=n("v-col"),g=n("v-row"),y=n("v-tooltip"),m=n("v-btn"),S=n("v-sheet"),C=n("v-card");return o(),d(C,{class:"pa-2 border-sm rounded-lg",variant:"flat",disabled:s.value.status!="green"},{default:t(()=>[e(g,null,{default:t(()=>[e(u,{cols:"12",sm:"5",class:"justify-start align-start"},{default:t(()=>[e(g,null,{default:t(()=>[l("div",W,[e(v,{height:"100",width:"175",src:s.value.cover_image,alt:s.value.name+" Image",cover:""},null,8,["src","alt"]),s.value.status!="green"?(o(),_("div",A,i(r.$t("comingSoon")),1)):$("",!0)]),e(u,{class:"justify-center align-center pl-4"},{default:t(()=>[l("div",G,i(s.value.name),1),l("div",null,i(s.value.description),1),l("div",null,i(`${s.value.completed_steps_count} / ${s.value.total_steps_count}`),1)]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",sm:"7",class:"d-flex flex-column justify-center align-center"},{default:t(()=>[a(c)?(o(),_("div",H,"Pending...")):a(k)?(o(),d(S,{key:1,class:"d-flex align-content-start flex-wrap gap-1"},{default:t(()=>[(o(!0),_(I,null,P(f.value,p=>(o(),d(m,{key:p.id,class:L(["small-btn ma-0 pa-0 w-3 h-3",b(p.progress)]),variant:"flat"},{default:t(()=>[e(y,{activator:"parent",location:"top"},{default:t(()=>[j(i(p.id),1)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})):$("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])}}}),M=O(J,[["__scopeId","data-v-18ed6408"]]),U=l("div",{class:"text-h5 pb-6"},"Student Profile",-1),X={key:1},Y={key:2},Z={class:"text-h5 pt-4"},ee={class:"text-body"},te={class:"flex pt-2"},oe=l("div",{class:"text-h4"},"375xp",-1),se=l("br",null,null,-1),ne=l("br",null,null,-1),pe=V({__name:"StudentProfileView",setup(B){const x=Q(),s=N(x.params.id.toString()),{isPending:f,isError:b,data:c,error:k}=F({queryKey:["school/student",s.value,"profile"],queryFn:()=>z.getStudentProfile(s.value)});return(r,w)=>{const v=n("v-skeleton-loader"),u=n("v-avatar"),g=n("v-icon"),y=n("v-btn"),m=n("v-col"),S=n("v-row"),C=n("v-card");return o(),d(m,{style:{"min-width":"300px","max-width":"100%"}},{default:t(()=>{var p,q;return[U,a(f)?(o(),d(v,{key:0,type:"list-item-two-line"})):a(b)?(o(),_("div",X,i((p=a(k))==null?void 0:p.message),1)):a(c)?(o(),_("div",Y,[e(C,{class:"pa-6 border-sm rounded-lg",variant:"flat"},{default:t(()=>[e(S,null,{default:t(()=>[e(m,{cols:"12",sm:"4",class:"d-flex flex-column justify-center align-center"},{default:t(()=>[a(c).image!=null?(o(),d(u,{key:0,image:a(c).image,size:"120"},null,8,["image"])):(o(),d(E,{key:1,big:!0})),l("div",Z,i(a(c).name),1),l("div",ee,i(a(c).login),1),l("div",te,[e(y,{style:{"min-width":"0px",visibility:"hidden"},class:"pa-0 h-auto",variant:"flat",density:"compact"},{default:t(()=>[e(g,{color:"info",icon:"mdi-information"})]),_:1}),oe,e(y,{style:{"min-width":"0px"},class:"pa-0",variant:"flat",density:"compact"},{default:t(()=>[e(g,{color:"info",icon:"mdi-information"})]),_:1})]),e(y,{class:"text-none py-2","prepend-icon":"mdi-pencil",variant:"plain",onClick:()=>{}},{default:t(()=>[j(i(r.$t("Edit profile")),1)]),_:1})]),_:1}),e(m,{cols:"12",sm:"4",class:"d-flex flex-column justify-center align-center"},{default:t(()=>[e(K)]),_:1}),e(m,{cols:"12",sm:"4",class:"d-flex flex-wrap justify-center align-center"},{default:t(()=>[(o(!0),_(I,null,P(a(c).artisan_tokens,h=>(o(),d(R,{class:"ma-2",key:h.id,token:h,small:!0},null,8,["token"]))),128))]),_:1})]),_:1})]),_:1}),se,(o(!0),_(I,null,P(a(c).courses,h=>(o(),d(M,{course:h,class:"mb-2"},null,8,["course"]))),256)),j(" "+i((q=a(c))==null?void 0:q.projects.length)+" ",1),ne])):$("",!0)]}),_:1})}}});export{pe as default};
