import{u as B}from"./course-content-store-DQ3yCIse.js";import{u as q}from"./useQuery-VCkO930N.js";import{S as R}from"./SkillService-DKbpM-sK.js";import{d as V,A as N,e as d,o as s,n as i,g as o,f as h,c as y,i as T,l as e,F as z,z as l,h as u,p as $,k as D,r as F,w as P,B as A,t as E,a as K,j as L}from"./index-DZj9jcQQ.js";import"./api-client-BYJOZBEW.js";import"./base-url-qR72hEjy.js";const Q=V({__name:"StepNavigationBar",setup(j){const _=B(),{activeStepIndex:c,currentSteps:r}=N(_),{changeStep:k}=_;function v(m,p){return p?"bg-orange":m=="completed"?"bg-green":m=="attempted"?"bg-yellow":m=="accessed"?"bg-grey":"bg-zinc-200"}return(m,p)=>{const a=d("v-icon"),w=d("v-btn"),x=d("v-col"),b=d("v-row"),S=d("v-container");return s(),i(S,{class:"d-flex sticky bottom-0 self-start border-y bg-white pa-0 my-0 mx-0"},{default:o(()=>[h(b,{class:"py-2 px-4 ma-0 gap-2"},{default:o(()=>[(s(!0),y(z,null,T(e(r),(f,t)=>(s(),i(x,{key:f.id,class:"d-flex flex-grow-0 align-center pa-0 ma-0"},{default:o(()=>[h(w,{class:l([v(f.progress,e(c)===t),"d-flex align-center justify-center"]),style:{"min-width":"0px","min-height":"100%"},density:"compact",variant:"tonal",onClick:n=>e(k)(t)},{default:o(()=>[e(r)[t].category==="code"?(s(),i(a,{key:0,class:l(e(c)===t?"text-white":"text-black")},{default:o(()=>[u(" mdi-xml ")]),_:2},1032,["class"])):e(r)[t].category==="picode"?(s(),i(a,{key:1,class:l(e(c)===t?"text-white":"text-black")},{default:o(()=>[u(" mdi-code-json ")]),_:2},1032,["class"])):e(r)[t].category==="scq"?(s(),i(a,{key:2,class:l(e(c)===t?"text-white":"text-black")},{default:o(()=>[u(" mdi-checkbox-marked-circle-outline ")]),_:2},1032,["class"])):e(r)[t].category==="mcq"?(s(),i(a,{key:3,class:l(e(c)===t?"text-white":"text-black")},{default:o(()=>[u(" mdi-checkbox-multiple-marked-outline ")]),_:2},1032,["class"])):e(r)[t].category==="video"?(s(),i(a,{key:4,class:l(e(c)===t?"text-white":"text-black")},{default:o(()=>[u(" mdi-play-circle-outline ")]),_:2},1032,["class"])):(s(),i(a,{key:5,class:l(e(c)===t?"text-white":"text-black")},{default:o(()=>[u(" mdi-text-box-outline ")]),_:2},1032,["class"]))]),_:2},1032,["class","onClick"]),t<e(r).length-1?(s(),i(a,{key:0,class:"h-5 w-5","aria-hidden":"true"},{default:o(()=>[u(" mdi-chevron-right ")]),_:1})):$("",!0)]),_:2},1024))),128))]),_:1})]),_:1})}}}),U={key:0,class:"p-8"},G={key:1},H={key:2,class:"flex h-full w-full"},J={class:"flex-1 flex flex-col justify-between items-center pt-8"},I=V({__name:"CourseTopicView",setup(j){const _=D(),c=B(),{setSteps:r,setActives:k,resetIsStepChange:v}=c,{currentStepProgress:m,isStepChange:p}=N(c),a=F(""),{isPending:w,isError:x,data:b,error:S,refetch:f}=q({queryKey:["topic",a],queryFn:t});async function t(){var g;const n=await R.getTopicByID(a.value);if(r(n.steps),!p.value){const C=n.last_accessed_step!=null?n.last_accessed_step.id:n.steps[0].id;k(null,null,(((g=n.last_accessed_step)==null?void 0:g.order)??1)-1),L.replace({path:`/course/${_.params.id}/topic/${a.value}/step/${C}`})}return n}return P([()=>_.params.topic_id,()=>m.value],([n,g])=>{a.value=_.params.topic_id.toString(),f()},{immediate:!0}),A(()=>{v()}),(n,g)=>{const C=d("RouterView");return e(w)?(s(),y("div",U," Pending... ")):e(x)?(s(),y("div",G,E(e(S)),1)):e(b)?(s(),y("div",H,[K("div",J,[h(C),h(Q)])])):$("",!0)}}});export{I as default};
