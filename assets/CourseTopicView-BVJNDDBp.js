import{u as V}from"./course-content-store-LuPfKKva.js";import{u as j}from"./useQuery-NGA92GfU.js";import{S as z}from"./SkillService-DxUrspbA.js";import{d as N,y as $,b as p,o as s,h as n,w as a,e as k,c as v,n as F,z as i,f as e,g as u,i as q,F as P,u as A,r as E,m as K,B as L,t as O,a as Q,A as U}from"./index-DasVOBpl.js";import"./api-client-CyCotnGi.js";import"./base-url-qR72hEjy.js";const G=N({__name:"StepNavigationBar",setup(D){const _=V(),{activeStepIndex:o,currentSteps:c}=$(_),{changeStep:b}=_;function f(d,h){return h?"bg-orange":d=="completed"?"bg-green":d=="attempted"?"bg-yellow":d=="accessed"?"bg-grey":"bg-zinc-200"}return(d,h)=>{const r=p("v-icon"),w=p("v-btn"),m=p("v-col"),x=p("v-row"),S=p("v-container");return s(),n(S,{class:"d-flex sticky bottom-0 self-start border-y bg-white pa-0 my-0 mx-0"},{default:a(()=>[k(x,{class:"py-2 px-4 ma-0 gap-2"},{default:a(()=>[(s(!0),v(P,null,F(e(c),(y,t)=>(s(),n(m,{key:y.id,class:"d-flex flex-grow-0 align-center pa-0 ma-0"},{default:a(()=>[k(w,{class:i([f(y.progress,e(o)===t),"d-flex align-center justify-center"]),style:{"min-width":"0px","min-height":"100%"},density:"compact",variant:"tonal",onClick:B=>e(b)(t)},{default:a(()=>[e(c)[t].category==="code"?(s(),n(r,{key:0,class:i(e(o)===t?"text-white":"text-black")},{default:a(()=>[u(" mdi-xml ")]),_:2},1032,["class"])):e(c)[t].category==="picode"?(s(),n(r,{key:1,class:i(e(o)===t?"text-white":"text-black")},{default:a(()=>[u(" mdi-code-json ")]),_:2},1032,["class"])):e(c)[t].category==="scq"?(s(),n(r,{key:2,class:i(e(o)===t?"text-white":"text-black")},{default:a(()=>[u(" mdi-checkbox-marked-circle-outline ")]),_:2},1032,["class"])):e(c)[t].category==="mcq"?(s(),n(r,{key:3,class:i(e(o)===t?"text-white":"text-black")},{default:a(()=>[u(" mdi-checkbox-multiple-marked-outline ")]),_:2},1032,["class"])):e(c)[t].category==="video"?(s(),n(r,{key:4,class:i(e(o)===t?"text-white":"text-black")},{default:a(()=>[u(" mdi-play-circle-outline ")]),_:2},1032,["class"])):(s(),n(r,{key:5,class:i(e(o)===t?"text-white":"text-black")},{default:a(()=>[u(" mdi-text-box-outline ")]),_:2},1032,["class"]))]),_:2},1032,["class","onClick"]),t<e(c).length-1?(s(),n(r,{key:0,class:"h-5 w-5","aria-hidden":"true"},{default:a(()=>[u(" mdi-chevron-right ")]),_:1})):q("",!0)]),_:2},1024))),128))]),_:1})]),_:1})}}}),H={key:0,class:"p-8"},J={key:1},M={key:2,class:"flex h-full w-full"},W={class:"flex-1 flex flex-col justify-between items-center pt-8"},se=N({__name:"CourseTopicView",setup(D){const _=A(),o=V(),{currentStepProgress:c,isStepChange:b,dashboardStepID:f,dashboardStepOrder:d}=$(o),{setSteps:h,setActives:r,resetIsStepChange:w}=o,m=E(""),{isPending:x,isError:S,data:y,error:t,refetch:B}=j({queryKey:["topic",m],queryFn:R});async function R(){var g;const l=await z.getTopicByID(m.value);if(h(l.steps),!b.value){const C=l.last_accessed_step!=null?l.last_accessed_step.id:l.steps[0].id,T=f.value!=null?d.value:((g=l.last_accessed_step)==null?void 0:g.order)??1;r(null,null,T-1),U.replace({path:`/course/${_.params.id}/topic/${m.value}/step/${f.value??C}`})}return l}return K([()=>_.params.topic_id,()=>c.value],([l,g])=>{m.value=_.params.topic_id.toString(),B()},{immediate:!0}),L(()=>{w()}),(l,g)=>{const C=p("RouterView");return e(x)?(s(),v("div",H," Pending... ")):e(S)?(s(),v("div",J,O(e(t)),1)):e(y)?(s(),v("div",M,[Q("div",W,[k(C),k(G)])])):q("",!0)}}});export{se as default};
