import{d as S,u as B,r as C,e as a,o as y,c as V,f as e,g as t,h as c,t as _,F as Q,q as K,w as T,D as h,_ as L,n as D,a as k,l as q,i as E}from"./index-C5dyWmaC.js";import{a as N,u as P}from"./useQuery-BKFB3CyQ.js";import{C as U,u as R}from"./dashboard-store-D6sF99pa.js";import"./api-client-DXmZwqpk.js";import"./base-url-qR72hEjy.js";const j=S({__name:"DeleteClassFormDialog",props:{item:{}},setup($){const{t:u}=B(),r=$,o=C(!1),s=C(!1),m=N();async function v(){s.value=!0;try{await U.deleteClass(r.item.id.toString()),m.invalidateQueries({queryKey:["classes"]}),o.value=!1}catch(d){alert(`${u("failedToDeleteClass")}: ${d}`)}finally{s.value=!1}}return(d,l)=>{const n=a("v-btn"),i=a("v-card-title"),p=a("v-card-text"),f=a("v-card"),g=a("v-card-actions"),w=a("v-dialog");return y(),V(Q,null,[e(n,{"prepend-icon":"mdi-delete",variant:"plain",loading:s.value,disabled:s.value,onClick:l[0]||(l[0]=()=>{o.value=!0})},{default:t(()=>[c("Remove")]),_:1},8,["loading","disabled"]),e(w,{modelValue:o.value,"onUpdate:modelValue":l[3]||(l[3]=b=>o.value=b),"max-width":"600"},{default:t(()=>[e(f,{class:"pa-4"},{default:t(()=>[e(i,{class:"px-2"},{default:t(()=>[c(_(d.$t("deleteStudent"))+"?",1)]),_:1}),e(f,{class:"ma-2",color:"yellow",variant:"tonal"},{default:t(()=>[e(p,{class:"text-medium-emphasis text-lg"},{default:t(()=>[c(_(d.$t("warningAllHisProgressDataWillBeRemovedPermanently")),1)]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(n,{color:"green darken-1",variant:"text",onClick:l[1]||(l[1]=b=>o.value=!1)},{default:t(()=>[c(_(d.$t("cancel")),1)]),_:1}),e(n,{loading:s.value,color:"red",variant:"flat",disabled:s.value,onClick:l[2]||(l[2]=b=>v())},{default:t(()=>[c(_(d.$t("delete")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),H=S({__name:"UpdateClassFormDialog",props:{item:{}},setup($){const{t:u}=B(),r=$,o=C(!1),s=C(!1),m=N(),v=C({name:r.item.name}),d=K(()=>v.value.name),l=async()=>{if(!d.value)return alert(u("pleaseFillInAllFields"));s.value=!0;try{await U.updateClass(r.item.id.toString(),v.value.name),m.invalidateQueries({queryKey:["classes"]}),o.value=!1}catch(n){alert(`${u("failedToUpdateStudent")}: ${n}`)}finally{s.value=!1}};return T(o,n=>{n&&(v.value.name=r.item.name)}),(n,i)=>{const p=a("v-btn"),f=a("v-card-title"),g=a("v-text-field"),w=a("v-form"),b=a("v-card-text"),I=a("v-card-actions"),A=a("v-card"),x=a("v-dialog");return y(),V(Q,null,[e(p,{"prepend-icon":"mdi-pencil",variant:"plain",onClick:i[0]||(i[0]=F=>o.value=!0)},{default:t(()=>[c("Edit")]),_:1}),e(x,{modelValue:o.value,"onUpdate:modelValue":i[3]||(i[3]=F=>o.value=F),"max-width":"600"},{default:t(()=>[e(A,{class:"pa-4"},{default:t(()=>[e(f,{class:"px-2"},{default:t(()=>[c(_(n.$t("updateStudent")),1)]),_:1}),e(b,null,{default:t(()=>[e(w,{onSubmit:h(l,["prevent"])},{default:t(()=>[e(g,{modelValue:v.value.name,"onUpdate:modelValue":i[1]||(i[1]=F=>v.value.name=F),type:"text",density:"compact",label:n.$t("name"),placeholder:n.$t("name"),"prepend-inner-icon":"mdi-account-outline",variant:"outlined",required:""},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(p,{color:"red darken-1",variant:"text",onClick:i[2]||(i[2]=F=>o.value=!1)},{default:t(()=>[c(_(n.$t("cancel")),1)]),_:1}),e(p,{loading:s.value,color:"primary",variant:"flat",disabled:!d.value||s.value,onClick:l},{default:t(()=>[c(_(n.$t("save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),M=L(H,[["__scopeId","data-v-86f98fc0"]]),W={class:"text-body-1"},z={class:"flex items-center"},G={class:"text-body-1"},J={style:{color:"blue"}},O=S({__name:"ClassCard",props:{item:{}},setup($){const u=$,r=K(()=>u.item);return(o,s)=>{const m=a("v-icon"),v=a("v-card-title"),d=a("v-spacer"),l=a("v-list-item"),n=a("v-list"),i=a("v-menu"),p=a("v-btn"),f=a("v-card");return y(),D(f,{to:`/dashboard/class/${u.item.id}`,class:"d-flex flex pa-2 mb-2 border-sm rounded-lg",variant:"flat",link:""},{default:t(()=>[e(v,null,{default:t(()=>{var g;return[c(_(u.item.name)+" ",1),e(m,{color:"success",icon:"mdi mdi-circle-small"}),k("span",W,_(((g=u.item.students)==null?void 0:g.length)??0)+" students",1)]}),_:1}),e(d),k("div",z,[k("div",G,[c(" class code: "),k("span",J,_(u.item.code),1)])]),e(p,{variant:"flat",icon:"",class:"pa-0",onClick:h(()=>{},["prevent"])},{default:t(()=>[e(m,null,{default:t(()=>[c("mdi-dots-vertical")]),_:1}),e(i,{activator:"parent"},{default:t(()=>[e(n,{onClick:s[0]||(s[0]=h(()=>{},["stop"]))},{default:t(()=>[e(l,{class:"pa-0"},{default:t(()=>[e(M,{item:r.value},null,8,["item"])]),_:1}),e(l,{class:"pa-0"},{default:t(()=>[e(j,{item:r.value},null,8,["item"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["to"])}}}),X=L(O,[["__scopeId","data-v-04f17012"]]),Y=S({__name:"AddClassFormDialog",setup($){const{t:u}=B(),r=C(!1),o=C(!1),s=N(),m=C({name:""}),v=K(()=>m.value.name),d=async()=>{if(!v.value)return alert(u("pleaseFillInAllFields"));o.value=!0;try{await U.addClass(m.value.name),s.invalidateQueries({queryKey:["classes"]}),r.value=!1}catch(l){alert(`${u("failedToAddClass")}: ${l}`)}finally{o.value=!1}};return T(r,l=>{l==!1&&(m.value={name:""})}),(l,n)=>{const i=a("v-btn"),p=a("v-card-title"),f=a("v-text-field"),g=a("v-form"),w=a("v-card-text"),b=a("v-card-actions"),I=a("v-card"),A=a("v-dialog");return y(),V("div",null,[e(i,{color:"green",variant:"flat",onClick:n[0]||(n[0]=x=>r.value=!0)},{default:t(()=>[c(" + "+_(l.$t("add")),1)]),_:1}),e(A,{modelValue:r.value,"onUpdate:modelValue":n[3]||(n[3]=x=>r.value=x),"max-width":"600"},{default:t(()=>[e(I,{class:"pa-4"},{default:t(()=>[e(p,{class:"px-2"},{default:t(()=>[c(_(l.$t("createNewClass")),1)]),_:1}),e(w,null,{default:t(()=>[e(g,{onSubmit:h(d,["prevent"])},{default:t(()=>[e(f,{modelValue:m.value.name,"onUpdate:modelValue":n[1]||(n[1]=x=>m.value.name=x),type:"text",density:"compact",label:l.$t("name"),placeholder:l.$t("name"),"prepend-inner-icon":"mdi-pencil",variant:"outlined",required:""},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(i,{color:"red darken-1",variant:"text",onClick:n[2]||(n[2]=x=>r.value=!1)},{default:t(()=>[c(_(l.$t("cancel")),1)]),_:1}),e(i,{loading:o.value,color:"primary",variant:"flat",disabled:!v.value||o.value,onClick:d},{default:t(()=>[c(_(l.$t("create")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Z=L(Y,[["__scopeId","data-v-91997e45"]]),ee={class:"flex justify-between"},te=k("div",{class:"text-h5 pb-6"},"Classes",-1),ae={key:1},le={key:2},re=S({__name:"ClassesView",setup($){const u=R(),{setClasses:r}=u,{isPending:o,isError:s,data:m,error:v}=P({queryKey:["classes"],queryFn:async()=>{const d=await U.getClasses();return r(d),d}});return(d,l)=>{const n=a("v-skeleton-loader"),i=a("v-col");return y(),D(i,{style:{"min-width":"300px","max-width":"100%"}},{default:t(()=>{var p;return[k("div",ee,[te,e(Z)]),q(o)?(y(),D(n,{key:0,type:"list-item-two-line"})):q(s)?(y(),V("div",ae,_((p=q(v))==null?void 0:p.message),1)):(y(),V("div",le,[(y(!0),V(Q,null,E(q(m),f=>(y(),D(X,{key:f.id,item:f},null,8,["item"]))),128))]))]}),_:1})}}});export{re as default};
