import{o as P,A as $}from"./utils-CMD4rBgk.js";import{_ as I}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-BT_DqjWZ.js";import{s as j,A as h,d as B,u as A,r as v,k as T,j as L,B as N,c as F,e as t,w as r,F as q,b as s,o as z,g as _,f as D,a as c,t as b,D as R,E as M,_ as O}from"./index-CmTIu2SI.js";import{b as G}from"./base-url-qR72hEjy.js";const H=async i=>{const d=await fetch(`${G}/school/student/register`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:P(i)});if(d.status<200||d.status>=300)throw new Error(d.statusText);const l=await d.json();console.log(l),j(l),h.replace({path:"/projects"})},w=i=>(R("data-v-73f3fb16"),i=i(),M(),i),J=w(()=>c("div",{class:"text-subtitle-1 text-medium-emphasis"},"Class code",-1)),K=w(()=>c("div",{class:"text-subtitle-1 text-medium-emphasis"},"Name",-1)),Q={class:"text-subtitle-1 text-medium-emphasis"},W={class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},X=w(()=>c("div",{class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"}," Repeat password ",-1)),Y=B({__name:"SignUpPage",setup(i){const d=A(),l=v(!1),u=v(!1),m=v(!1),a=v({code:d.query.classCode||""}),y=()=>{h.replace({path:"/login"})},k=T(()=>a.value.login&&a.value.password&&a.value.name&&a.value.code),g=async n=>{if(!k.value)return alert("Please fill in all fields!");if(n.password!=n.confirmPassword)return alert("Confirm password is incorrect!");l.value=!0;try{await H(n)}catch(e){alert(`Failed: ${e}`)}finally{l.value=!1}},x=n=>{n.key==="Enter"&&g(a.value)};return L(()=>{window.addEventListener("keyup",x)}),N(()=>{window.removeEventListener("keyup",x)}),(n,e)=>{const V=s("v-spacer"),f=s("v-btn"),C=s("v-app-bar"),U=s("v-img"),p=s("v-text-field"),E=s("v-card"),S=s("v-container");return z(),F(q,null,[t(C,{elevation:"0",class:"px-8"},{default:r(()=>[t(V),t(I),t(f,{class:"ml-4",color:"black",variant:"tonal",onClick:y},{default:r(()=>[_(" Sign In ")]),_:1})]),_:1}),t(S,{class:"mt-12"},{default:r(()=>[t(U,{class:"mx-auto my-6","max-width":"64",src:D($)},null,8,["src"]),t(E,{class:"mx-auto px-12 py-8 pb-8",elevation:"8","max-width":"448",rounded:"lg"},{default:r(()=>[J,t(p,{"hide-details":"",modelValue:a.value.code,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.code=o),type:"email",density:"compact",placeholder:"Class code","prepend-inner-icon":"mdi-qrcode",variant:"outlined"},null,8,["modelValue"]),K,t(p,{"hide-details":"",modelValue:a.value.name,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.name=o),type:"text",density:"compact",placeholder:"Enter name","prepend-inner-icon":"mdi-account",variant:"outlined"},null,8,["modelValue"]),c("div",Q,b(n.$t("email")),1),t(p,{"hide-details":"",modelValue:a.value.login,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.login=o),type:"email",density:"compact",placeholder:"Email address","prepend-inner-icon":"mdi-email-outline",variant:"outlined"},null,8,["modelValue"]),c("div",W,b(n.$t("password")),1),t(p,{"hide-details":"",modelValue:a.value.password,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.password=o),"append-inner-icon":u.value?"mdi-eye-off":"mdi-eye",type:u.value?"text":"password",density:"compact",placeholder:"Enter your password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":e[4]||(e[4]=o=>u.value=!u.value)},null,8,["modelValue","append-inner-icon","type"]),X,t(p,{modelValue:a.value.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=o=>a.value.confirmPassword=o),"append-inner-icon":m.value?"mdi-eye-off":"mdi-eye",type:m.value?"text":"password",density:"compact",placeholder:"Confirm password","prepend-inner-icon":"mdi-lock-check-outline",variant:"outlined","onClick:appendInner":e[6]||(e[6]=o=>m.value=!m.value)},null,8,["modelValue","append-inner-icon","type"]),t(f,{loading:l.value,disabled:l.value,color:"black",size:"large",variant:"flat",block:"",onClick:e[7]||(e[7]=o=>g(a.value))},{default:r(()=>[_(" Sign up ")]),_:1},8,["loading","disabled"]),t(f,{class:"no-uppercase",color:"black",size:"large",variant:"text",block:"",onClick:y},{default:r(()=>[_(" Already have an account? ")]),_:1})]),_:1})]),_:1})],64)}}}),oe=O(Y,[["__scopeId","data-v-73f3fb16"]]);export{oe as default};
