import{u as F}from"./useQuery-DUanmItu.js";import{m as R}from"./marked-DhwVJeM6.js";import{P as U}from"./ProjectService-BwHYQ7pF.js";import{d as q,u as E,r as _,k as m,f as l,c as s,t as x,a as t,e as i,F as p,p as h,h as v,w as P,i as C,b as r,o as e,g as I}from"./index-D_KheEFR.js";import{u as $}from"./api-BNPqHvx4.js";import{b as A}from"./base-url-qR72hEjy.js";import{_ as D}from"./TokenCard.vue_vue_type_script_setup_true_lang-B71QqGVK.js";import{g as H}from"./youtube-link-sanitizer-C9o3ZHbr.js";import"./api-client-B58bgvt1.js";const M={key:0,class:"p-8"},Y={key:1},z={key:2,class:"flex justify-center w-full bg-white"},K={class:"w-8/12 self-center"},Q=t("br",null,null,-1),G={key:0},J=["src"],O=t("br",null,null,-1),W={class:"flex"},X=t("br",null,null,-1),Z=["innerHTML"],ee=t("br",null,null,-1),te={class:"text-h5",style:{"font-family":"system-ui","font-weight":"600"}},oe=t("br",null,null,-1),se={class:"float-right pb-8"},pe=q({__name:"ProjectContentView",setup(ne){const f=E(),{fetchAPI:L}=$(),k=_(""),a=_({}),c=_(""),S=m(()=>R.parse(k.value)),{isPending:V,isError:j,data:u,error:B}=F({queryKey:["/projects/",f.params.id.toString()],queryFn:async()=>{const o=await U.getProjectByID(f.params.id.toString());a.value=o;const b=await L(`${A}/${o.path}`).then(d=>d.text());return k.value=b,c.value=H(o.videoURL),o}}),N=m(()=>a.value.checklist.items.filter(o=>o.level==="main")),y=m(()=>a.value.checklist.items.filter(o=>o.level==="bonus"));return(o,b)=>{const d=r("v-empty-state"),g=r("v-divider"),w=r("v-checkbox"),T=r("v-btn");return l(V)?(e(),s("div",M," Pending... ")):l(j)?(e(),s("div",Y,x(l(B)),1)):l(u)?(e(),s("div",z,[t("div",K,[Q,c.value==null?(e(),s("div",G,[i(d,{headline:"Error",title:"Video not found",text:"Invalid video URL. Please check the link."})])):(e(),s("iframe",{key:1,width:"100%",height:"370",src:c.value,title:"YouTube video player",frameborder:"0",allow:"clipboard-write; encrypted-media; picture-in-picture",allowfullscreen:""},null,8,J)),O,t("div",W,[(e(!0),s(p,null,h(l(u).artisan_tokens,n=>(e(),s("div",{class:"px-2",key:n.id},[i(D,{token:n},null,8,["token"])]))),128))]),X,t("div",{innerHTML:S.value,class:"content markdown-body"},null,8,Z),ee,t("div",null,[t("div",te,x(l(u).checklist.title),1),i(g,{thickness:"1",opacity:"100",class:"mt-1 mb-2"}),(e(!0),s(p,null,h(N.value,n=>(e(),v(w,{color:"info",density:"compact","hide-details":"",label:n.text,key:n.id},null,8,["label"]))),128)),y.value.length>0?(e(),v(g,{key:0,thickness:"1",opacity:"100"},{default:P(()=>[I("Not required")]),_:1})):C("",!0),(e(!0),s(p,null,h(y.value,n=>(e(),v(w,{color:"warning",density:"compact","hide-details":"",label:n.text,key:n.id},null,8,["label"]))),128))]),oe,t("div",se,[i(T,{color:"green","append-icon":"mdi-check-bold",onClick:()=>{}},{default:P(()=>[I("Submit for Review")]),_:1})])])])):C("",!0)}}});export{pe as default};
