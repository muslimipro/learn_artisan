import{o as $,A as I}from"./utils-CMD4rBgk.js";import{_ as j}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-BXN1EzYC.js";import{s as B,A as h,d as A,u as T,r as v,l as L,j as N,B as q,h as z,w as i,b as l,o as D,e as t,g as _,f as R,a as c,t as b,D as F,E as M,_ as O}from"./index-1utu-OMs.js";import{b as G}from"./base-url-qR72hEjy.js";const H=async d=>{const r=await fetch(`${G}/school/student/register`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:$(d)});if(r.status<200||r.status>=300)throw new Error(r.statusText);const s=await r.json();console.log(s),B(s),h.replace({path:"/projects"})},w=d=>(F("data-v-b66f3fef"),d=d(),M(),d),J=w(()=>c("div",{class:"text-subtitle-1 text-medium-emphasis"},"Class code",-1)),K=w(()=>c("div",{class:"text-subtitle-1 text-medium-emphasis"},"Name",-1)),Q={class:"text-subtitle-1 text-medium-emphasis"},W={class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},X=w(()=>c("div",{class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"}," Repeat password ",-1)),Y=A({__name:"SignUpPage",setup(d){const r=T(),s=v(!1),u=v(!1),m=v(!1),a=v({code:r.query.classCode||""}),y=()=>{h.replace({path:"/login"})},V=L(()=>a.value.login&&a.value.password&&a.value.name&&a.value.code),g=async n=>{if(!V.value)return alert("Please fill in all fields!");if(n.password!=n.confirmPassword)return alert("Confirm password is incorrect!");s.value=!0;try{await H(n)}catch(e){alert(`Failed: ${e}`)}finally{s.value=!1}},x=n=>{n.key==="Enter"&&g(a.value)};return N(()=>{window.addEventListener("keyup",x)}),q(()=>{window.removeEventListener("keyup",x)}),(n,e)=>{const k=l("v-spacer"),f=l("v-btn"),C=l("v-app-bar"),U=l("v-img"),p=l("v-text-field"),E=l("v-card"),S=l("v-container"),P=l("v-app");return D(),z(P,null,{default:i(()=>[t(C,{elevation:"0",class:"px-8"},{default:i(()=>[t(k),t(j),t(f,{class:"ml-4",color:"black",variant:"tonal",onClick:y},{default:i(()=>[_(" Sign In ")]),_:1})]),_:1}),t(S,{class:"mt-12"},{default:i(()=>[t(U,{class:"mx-auto my-6","max-width":"64",src:R(I)},null,8,["src"]),t(E,{class:"mx-auto px-12 py-8 pb-8",elevation:"8","max-width":"448",rounded:"lg"},{default:i(()=>[J,t(p,{"hide-details":"",modelValue:a.value.code,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.code=o),type:"email",density:"compact",placeholder:"Class code","prepend-inner-icon":"mdi-qrcode",variant:"outlined"},null,8,["modelValue"]),K,t(p,{"hide-details":"",modelValue:a.value.name,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.name=o),type:"text",density:"compact",placeholder:"Enter name","prepend-inner-icon":"mdi-account",variant:"outlined"},null,8,["modelValue"]),c("div",Q,b(n.$t("email")),1),t(p,{"hide-details":"",modelValue:a.value.login,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.login=o),type:"email",density:"compact",placeholder:"Email address","prepend-inner-icon":"mdi-email-outline",variant:"outlined"},null,8,["modelValue"]),c("div",W,b(n.$t("password")),1),t(p,{"hide-details":"",modelValue:a.value.password,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.password=o),"append-inner-icon":u.value?"mdi-eye-off":"mdi-eye",type:u.value?"text":"password",density:"compact",placeholder:"Enter your password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":e[4]||(e[4]=o=>u.value=!u.value)},null,8,["modelValue","append-inner-icon","type"]),X,t(p,{modelValue:a.value.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=o=>a.value.confirmPassword=o),"append-inner-icon":m.value?"mdi-eye-off":"mdi-eye",type:m.value?"text":"password",density:"compact",placeholder:"Confirm password","prepend-inner-icon":"mdi-lock-check-outline",variant:"outlined","onClick:appendInner":e[6]||(e[6]=o=>m.value=!m.value)},null,8,["modelValue","append-inner-icon","type"]),t(f,{loading:s.value,disabled:s.value,color:"black",size:"large",variant:"flat",block:"",onClick:e[7]||(e[7]=o=>g(a.value))},{default:i(()=>[_(" Sign up ")]),_:1},8,["loading","disabled"]),t(f,{class:"no-uppercase",color:"black",size:"large",variant:"text",block:"",onClick:y},{default:i(()=>[_(" Already have an account? ")]),_:1})]),_:1})]),_:1})]),_:1})}}}),oe=O(Y,[["__scopeId","data-v-b66f3fef"]]);export{oe as default};
