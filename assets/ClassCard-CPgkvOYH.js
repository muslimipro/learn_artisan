import{d as V,r as b,k as B,m as T,b as t,o as y,c as U,e,w as a,g as s,t as c,v as F,F as q,_ as A,h as $,a as w,i as h}from"./index-D_KheEFR.js";import{a as D}from"./useQuery-DUanmItu.js";import{C as S}from"./ClassService-BJbp8wX5.js";const L=V({__name:"UpdateClassFormDialog",props:{item:{}},setup(C){const d=C,n=b(!1),o=b(!1),p=D(),u=b({name:d.item.name}),v=B(()=>u.value.name),l=async()=>{if(!v.value)return alert("pleaseFillInAllFields");o.value=!0;try{await S.updateClass(d.item.id.toString(),u.value.name),p.invalidateQueries({queryKey:["classes"]}),n.value=!1}catch(i){alert(`failedToUpdateStudent: ${i}`)}finally{o.value=!1}};return T(n,i=>{i&&(u.value.name=d.item.name)}),(i,r)=>{const f=t("v-btn"),m=t("v-card-title"),x=t("v-text-field"),g=t("v-form"),_=t("v-card-text"),I=t("v-card-actions"),Q=t("v-card"),K=t("v-dialog");return y(),U(q,null,[e(f,{"prepend-icon":"mdi-pencil",variant:"plain",onClick:r[0]||(r[0]=k=>n.value=!0)},{default:a(()=>[s("Edit")]),_:1}),e(K,{modelValue:n.value,"onUpdate:modelValue":r[3]||(r[3]=k=>n.value=k),"max-width":"600"},{default:a(()=>[e(Q,{class:"pa-4"},{default:a(()=>[e(m,{class:"px-2"},{default:a(()=>[s(c("updateStudent"))]),_:1}),e(_,null,{default:a(()=>[e(g,{onSubmit:F(l,["prevent"])},{default:a(()=>[e(x,{modelValue:u.value.name,"onUpdate:modelValue":r[1]||(r[1]=k=>u.value.name=k),type:"text",density:"compact",label:"name",placeholder:"name","prepend-inner-icon":"mdi-account-outline",variant:"outlined",required:""},null,8,["modelValue"])]),_:1})]),_:1}),e(I,null,{default:a(()=>[e(f,{color:"red darken-1",variant:"text",onClick:r[2]||(r[2]=k=>n.value=!1)},{default:a(()=>[s(c("cancel"))]),_:1}),e(f,{loading:o.value,color:"primary",variant:"flat",disabled:!v.value||o.value,onClick:l},{default:a(()=>[s(c("save"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),N=A(L,[["__scopeId","data-v-26cdee02"]]),P=V({__name:"ArchiveClassFormDialog",props:{item:{}},setup(C){const d=C,n=b(!1),o=b(!1),p=D();async function u(){o.value=!0;try{await S.archiveClass(d.item.id.toString()),p.invalidateQueries({queryKey:["classes"]}),n.value=!1}catch(v){alert(`failedToArchiveClass: ${v}`)}finally{o.value=!1}}return(v,l)=>{const i=t("v-btn"),r=t("v-card-title"),f=t("v-card-text"),m=t("v-card"),x=t("v-card-actions"),g=t("v-dialog");return y(),U(q,null,[e(i,{"prepend-icon":"mdi-archive",variant:"plain",loading:o.value,disabled:o.value,onClick:l[0]||(l[0]=()=>{n.value=!0})},{default:a(()=>[s("Archive")]),_:1},8,["loading","disabled"]),e(g,{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=_=>n.value=_),"max-width":"600"},{default:a(()=>[e(m,{class:"pa-4"},{default:a(()=>[e(r,{class:"px-2"},{default:a(()=>[s(c("archiveClass")+"?")]),_:1}),e(m,{class:"ma-2",color:"yellow",variant:"tonal"},{default:a(()=>[e(f,{class:"text-medium-emphasis text-lg"},{default:a(()=>[s(c("warningAllHisProgressDataWillBeArchived"))]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(i,{color:"green darken-1",variant:"text",onClick:l[1]||(l[1]=_=>n.value=!1)},{default:a(()=>[s(c("cancel"))]),_:1}),e(i,{loading:o.value,color:"red",variant:"flat",disabled:o.value,onClick:l[2]||(l[2]=_=>u())},{default:a(()=>[s(c("archive"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),R=V({__name:"UnarchiveClassFormDialog",props:{item:{}},setup(C){const d=C,n=b(!1),o=b(!1),p=D();async function u(){o.value=!0;try{await S.unarchiveClass(d.item.id.toString()),p.invalidateQueries({queryKey:["classes/inactive"]}),n.value=!1}catch(v){alert(`failedToUnarchiveClass: ${v}`)}finally{o.value=!1}}return(v,l)=>{const i=t("v-btn"),r=t("v-card-title"),f=t("v-card-text"),m=t("v-card"),x=t("v-card-actions"),g=t("v-dialog");return y(),U(q,null,[e(i,{"prepend-icon":"mdi-archive-arrow-up",variant:"plain",loading:o.value,disabled:o.value,onClick:l[0]||(l[0]=()=>{n.value=!0})},{default:a(()=>[s("Unarchive")]),_:1},8,["loading","disabled"]),e(g,{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=_=>n.value=_),"max-width":"600"},{default:a(()=>[e(m,{class:"pa-4"},{default:a(()=>[e(r,{class:"px-2"},{default:a(()=>[s(c("unarchiveClass")+"?")]),_:1}),e(m,{class:"ma-2",color:"yellow",variant:"tonal"},{default:a(()=>[e(f,{class:"text-medium-emphasis text-lg"},{default:a(()=>[s(c("classWillBeReturnedBack"))]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(i,{color:"red darken-1",variant:"text",onClick:l[1]||(l[1]=_=>n.value=!1)},{default:a(()=>[s(c("cancel"))]),_:1}),e(i,{loading:o.value,color:"success",variant:"flat",disabled:o.value,onClick:l[2]||(l[2]=_=>u())},{default:a(()=>[s(c("Unarchive"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),W=V({__name:"DeleteClassFormDialog",props:{item:{}},setup(C){const d=C,n=b(!1),o=b(!1),p=D();async function u(){o.value=!0;try{await S.deleteClass(d.item.id.toString()),p.invalidateQueries({queryKey:["classes"]}),p.invalidateQueries({queryKey:["classes/inactive"]}),n.value=!1}catch(v){alert(`failedToDeleteClass: ${v}`)}finally{o.value=!1}}return(v,l)=>{const i=t("v-btn"),r=t("v-card-title"),f=t("v-card-text"),m=t("v-card"),x=t("v-card-actions"),g=t("v-dialog");return y(),U(q,null,[e(i,{"prepend-icon":"mdi-delete",variant:"plain",loading:o.value,disabled:o.value,onClick:l[0]||(l[0]=()=>{n.value=!0})},{default:a(()=>[s("Remove")]),_:1},8,["loading","disabled"]),e(g,{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=_=>n.value=_),"max-width":"600"},{default:a(()=>[e(m,{class:"pa-4"},{default:a(()=>[e(r,{class:"px-2"},{default:a(()=>[s(c("deleteClass")+"?")]),_:1}),e(m,{class:"ma-2",color:"yellow",variant:"tonal"},{default:a(()=>[e(f,{class:"text-medium-emphasis text-lg"},{default:a(()=>[s(c("warningAllHisProgressDataWillBeRemovedPermanently"))]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(i,{color:"green darken-1",variant:"text",onClick:l[1]||(l[1]=_=>n.value=!1)},{default:a(()=>[s(c("cancel"))]),_:1}),e(i,{loading:o.value,color:"red",variant:"flat",disabled:o.value,onClick:l[2]||(l[2]=_=>u())},{default:a(()=>[s(c("delete"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),E={class:"text-body-1"},H={class:"flex items-center"},M={class:"text-body-1"},j={style:{color:"blue"}},z=V({__name:"ClassCard",props:{item:{}},setup(C){const d=C,n=B(()=>d.item);return(o,p)=>{const u=t("v-icon"),v=t("v-card-title"),l=t("v-spacer"),i=t("v-list-item"),r=t("v-list"),f=t("v-menu"),m=t("v-btn"),x=t("v-card");return y(),$(x,{to:`/dashboard/class/${d.item.id}`,class:"d-flex flex pa-2 mb-2 border-sm rounded-lg",variant:"flat",link:d.item.is_active},{default:a(()=>[e(v,null,{default:a(()=>{var g;return[s(c(d.item.name)+" ",1),e(u,{color:"success",icon:"mdi mdi-circle-small"}),w("span",E,c(((g=d.item.students)==null?void 0:g.length)??0)+" students",1)]}),_:1}),e(l),w("div",H,[w("div",M,[s(" class code: "),w("span",j,c(d.item.code),1)])]),e(m,{variant:"flat",icon:"",class:"pa-0",onClick:F(()=>{},["prevent"])},{default:a(()=>[e(u,null,{default:a(()=>[s("mdi-dots-vertical")]),_:1}),e(f,{activator:"parent"},{default:a(()=>[e(r,{onClick:p[0]||(p[0]=F(()=>{},["stop"]))},{default:a(()=>[d.item.is_active?(y(),$(i,{key:0,class:"pa-0"},{default:a(()=>[e(N,{item:n.value},null,8,["item"])]),_:1})):h("",!0),d.item.is_active?(y(),$(i,{key:1,class:"pa-0"},{default:a(()=>[e(P,{item:n.value},null,8,["item"])]),_:1})):h("",!0),d.item.is_active?h("",!0):(y(),$(i,{key:2,class:"pa-0"},{default:a(()=>[e(R,{item:n.value},null,8,["item"])]),_:1})),d.item.is_active?h("",!0):(y(),$(i,{key:3,class:"pa-0"},{default:a(()=>[e(W,{item:n.value},null,8,["item"])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1},8,["to","link"])}}}),X=A(z,[["__scopeId","data-v-b58abc9a"]]);export{X as C};
