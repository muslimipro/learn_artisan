import{u as A}from"./useQuery-Bpmlz4Uh.js";import{d as V,y as D,j as F,c as o,a as s,t as k,f as e,F as q,n as B,o as r,z as M,l as x,u as I,A as N,e as T,i as R,b as j}from"./index-Dop57Fz-.js";import{S as O}from"./SkillService-6fk5R6O8.js";import{Y as E}from"./yellow_star-CHjFodN-.js";import{u as z}from"./course-content-store-Dvd530Wi.js";import"./api-client-DKgx13sC.js";import"./base-url-qR72hEjy.js";const P={class:"flex-none flex flex-col w-80 px-8 py-8 bg-zinc-50"},Y={class:"flex-1 basis-1 flex-col text-black gap-1 overflow-y-auto"},K={class:"flex text-black w-full text-xl text-ellipsis pb-4 border-b"},L={class:"pr-2"},Q=["src"],W=s("div",{class:"py-2"},null,-1),G=["onClick"],H={class:"py-2 pr-2 bg-transparent text-black truncate text-ellipsis"},J=s("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5 5 1 1 5"},null,-1),U=[J],X=["onClick"],Z={class:"text-left truncate text-ellipsis"},ee=V({__name:"CourseNavigationBar",props:{courseInfo:{}},setup($){const l=$.courseInfo,h=z(),{openedModule:i,activeModuleIndex:f,activeTopicIndex:d}=D(h),{resizeModules:w,toggleModule:b,changeTopic:m}=h;return F(()=>{w(l.modules.length)}),(a,S)=>(r(),o("div",P,[s("div",Y,[s("div",K,[s("h1",L,k(e(l).name),1),s("img",{src:e(E)},null,8,Q)]),W,(r(!0),o(q,null,B(e(l).modules,(u,n)=>(r(),o("h2",{key:u.name},[s("button",{type:"button",onClick:p=>e(b)(n),class:"flex justify-between items-center w-full"},[s("span",H,k(u.name),1),(r(),o("svg",{class:M([e(i)[n]?"":"rotate-180","w-3 h-3 shrink-0"]),fill:"none",viewBox:"0 0 10 6"},U,2))],8,G),s("div",null,[(r(!0),o(q,null,B(u.topics,(p,_)=>(r(),o("button",{key:p.id,class:M(["relative block w-full box-border h-8 px-4 py-1 border-l-2 hover:text-gray-800",[e(f)==n&&e(d)==_?"text-blue-600 border-black":"text-gray-500 border-gray-200",e(i)[n]||e(f)==n&&e(d)==_?"":"hidden"]]),onClick:t=>e(m)(n,_)},[s("p",Z,k(p.name),1)],10,X))),128))])]))),128))])]))}}),te={class:"flex flex-col w-full bg-white"},se={key:0},oe={key:1},re={key:2,class:"flex h-full"},pe=V({__name:"CourseContentView",setup($){const g=z(),{introIndex:l}=D(g),{setCourseInfo:h,setActives:i,setDashboardIDs:f}=g,d=x(()=>a.query.dashboard_topic_id||null),w=x(()=>parseInt(d.value??"-1")),b=x(()=>a.query.dashboard_step_order||null),m=x(()=>parseInt(b.value??"-1")),a=I(),{isPending:S,isError:u,data:n,error:p}=A({queryKey:[`skill/${a.params.id}`,a.query.dashboard_step_id,a.query.dashboard_step_order],queryFn:async()=>{const t=await O.getCourseInfoByID(a.params.id.toString());return f(a.query.dashboard_step_id||null,m.value),h(t),_(t),t},refetchOnWindowFocus:!1});async function _(t){var v;const C=d.value!=null?w.value:t.last_accessed_topic.id;for(let c=0;c<t.modules.length;c++){if(l.value!=null){i(c,l.value,0),N.replace({path:`/course/${t.id}/topic/${t.modules[c].topics[l.value].id}`});return}for(let y=0;y<t.modules[c].topics.length;y++)if(C==t.modules[c].topics[y].id){i(c,y,(b.value!=null?m.value:((v=t.last_accessed_topic.last_accessed_step)==null?void 0:v.order)??1)-1),N.replace({path:`/course/${t.id}/topic/${C}`});return}}}return(t,C)=>{const v=j("RouterView");return r(),o("div",te,[e(S)?(r(),o("div",se," Pending... ")):e(u)?(r(),o("div",oe,k(e(p)),1)):e(n)?(r(),o("div",re,[T(ee,{"course-info":e(n)},null,8,["course-info"]),T(v)])):R("",!0)])}}});export{pe as default};
