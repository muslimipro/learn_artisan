import{u as N}from"./useQuery-eGzM9mGp.js";import{S as C}from"./StudentService-CQYeN94D.js";import{_ as R}from"./AvatarPlaceholder.vue_vue_type_script_setup_true_lang-Dm3L1cis.js";import{S as T}from"./SkillsDiagram-BdgUQPmG.js";import{_ as L}from"./TokenCard.vue_vue_type_script_setup_true_lang-BrPaF5_Y.js";import{d as E,u as z,l as D,r as K,b as a,o as s,h as _,w as t,e,a as c,c as p,t as d,i as I,f as l,F as P,n as j,y as O,g as B,_ as Q}from"./index-BIzKhvK7.js";import"./api-client-CGNgyUH9.js";import"./base-url-qR72hEjy.js";const W={class:"relative image-container"},A={key:0,class:"absolute top-0 left-0 bg-yellow-400 text-black px-4 py-1 text-xs font-semibold"},G={class:"text-h5"},H={key:0},J=E({__name:"CourseProgressCard",props:{course:{}},setup(F){const b=z(),h=F,n=D(()=>h.course),g=D(()=>b.params.id),r=K([]);function k(i,f){return f?"bg-orange-darken-2":i=="completed"?"bg-green-darken-1":i=="attempted"?"bg-red-darken-1":i=="accessed"?"bg-grey-lighten-1":"bg-grey-lighten-2"}const{isPending:w,data:V}=N({queryKey:["skill",n.value.id,g.value],queryFn:async()=>{const i=await C.getCourseInfoByIdStudentId(n.value.id.toString(),g.value.toString());for(const f of i.modules)for(const v of f.topics){const u=await C.getTopicByIdStudentId(v.id.toString(),g.value.toString());r.value.push(...u.steps)}return i},refetchOnWindowFocus:!1});return(i,f)=>{const v=a("v-img"),u=a("v-col"),m=a("v-row"),$=a("v-tooltip"),S=a("v-btn"),y=a("v-sheet"),x=a("v-card");return s(),_(x,{class:"pa-2 border-sm rounded-lg",variant:"flat",disabled:n.value.status!="green"},{default:t(()=>[e(m,null,{default:t(()=>[e(u,{cols:"12",sm:"5",class:"justify-start align-start"},{default:t(()=>[e(m,null,{default:t(()=>[c("div",W,[e(v,{height:"100",width:"175",src:n.value.cover_image,alt:n.value.name+" Image",cover:""},null,8,["src","alt"]),n.value.status!="green"?(s(),p("div",A,d(i.$t("comingSoon")),1)):I("",!0)]),e(u,{class:"justify-center align-center pl-4"},{default:t(()=>[c("div",G,d(n.value.name),1),c("div",null,d(n.value.description),1),c("div",null,d(`${n.value.completed_steps_count} / ${n.value.total_steps_count}`),1)]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",sm:"7",class:"d-flex flex-column justify-center align-center"},{default:t(()=>[l(w)?(s(),p("div",H,"Pending...")):l(V)?(s(),_(y,{key:1,class:"d-flex align-content-start flex-wrap gap-1"},{default:t(()=>[(s(!0),p(P,null,j(r.value,o=>{var q;return s(),_(S,{to:`/course/${n.value.id}/topic/${o.parent_id}/step/${o.id}?dashboard_topic_id=${o.parent_id}&dashboard_step_id=${o.id}&dashboard_step_order=${o.order}`,key:o.id,class:O(["small-btn ma-0 pa-0 w-3 h-3",k(o.progress,((q=n.value.last_accessed_topic.last_accessed_step)==null?void 0:q.id)==o.id)]),variant:"flat"},{default:t(()=>[e($,{activator:"parent",location:"top"},{default:t(()=>[B(d(`${o.id}: ${o.name}`),1)]),_:2},1024)]),_:2},1032,["to","class"])}),128))]),_:1})):I("",!0)]),_:1})]),_:1})]),_:1},8,["disabled"])}}}),M=Q(J,[["__scopeId","data-v-710d26c0"]]),U=c("div",{class:"text-h5 pb-6"},"Student Profile",-1),X={key:1},Y={key:2},Z={class:"text-h5 pt-4"},ee={class:"text-body"},te={class:"flex pt-2"},oe=c("div",{class:"text-h4"},"375xp",-1),se=c("br",null,null,-1),ne=c("br",null,null,-1),me=E({__name:"StudentProfileView",setup(F){const b=z(),h=K(b.params.id.toString()),{isPending:n,isError:g,data:r,error:k}=N({queryKey:["school/student",h.value,"profile"],queryFn:()=>C.getStudentProfile(h.value)});return(w,V)=>{const i=a("v-skeleton-loader"),f=a("v-avatar"),v=a("v-icon"),u=a("v-btn"),m=a("v-col"),$=a("v-row"),S=a("v-card");return s(),_(m,{style:{"min-width":"300px","max-width":"100%"}},{default:t(()=>{var y,x;return[U,l(n)?(s(),_(i,{key:0,type:"list-item-two-line"})):l(g)?(s(),p("div",X,d((y=l(k))==null?void 0:y.message),1)):l(r)?(s(),p("div",Y,[e(S,{class:"pa-6 border-sm rounded-lg",variant:"flat"},{default:t(()=>[e($,null,{default:t(()=>[e(m,{cols:"12",sm:"4",class:"d-flex flex-column justify-center align-center"},{default:t(()=>[l(r).image!=null?(s(),_(f,{key:0,image:l(r).image,size:"120"},null,8,["image"])):(s(),_(R,{key:1,big:!0})),c("div",Z,d(l(r).name),1),c("div",ee,d(l(r).login),1),c("div",te,[e(u,{style:{"min-width":"0px",visibility:"hidden"},class:"pa-0 h-auto",variant:"flat",density:"compact"},{default:t(()=>[e(v,{color:"info",icon:"mdi-information"})]),_:1}),oe,e(u,{style:{"min-width":"0px"},class:"pa-0",variant:"flat",density:"compact"},{default:t(()=>[e(v,{color:"info",icon:"mdi-information"})]),_:1})]),e(u,{class:"text-none py-2","prepend-icon":"mdi-pencil",variant:"plain",onClick:()=>{}},{default:t(()=>[B(d(w.$t("Edit profile")),1)]),_:1})]),_:1}),e(m,{cols:"12",sm:"4",class:"d-flex flex-column justify-center align-center"},{default:t(()=>[e(T)]),_:1}),e(m,{cols:"12",sm:"4",class:"d-flex flex-wrap justify-center align-center"},{default:t(()=>[(s(!0),p(P,null,j(l(r).artisan_tokens,o=>(s(),_(L,{class:"ma-2",key:o.id,token:o,small:!0},null,8,["token"]))),128))]),_:1})]),_:1})]),_:1}),se,(s(!0),p(P,null,j(l(r).courses,o=>(s(),_(M,{key:o.id,course:o,class:"mb-2"},null,8,["course"]))),128)),B(" "+d((x=l(r))==null?void 0:x.projects.length)+" ",1),ne])):I("",!0)]}),_:1})}}});export{me as default};
