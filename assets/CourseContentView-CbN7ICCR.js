import{u as V}from"./useQuery-jj1_BKy7.js";import{d as S,A as B,b as z,o as n,c as r,a as o,t as f,l as t,F as y,i as g,z as w,k as A,j as C,e as F,f as $,p as N}from"./index-BXMFfV9n.js";import{S as R}from"./SkillService-FxZYE57v.js";import{Y as j}from"./yellow_star-CHjFodN-.js";import{u as M}from"./course-content-store-BcSqSZzz.js";import"./api-client-DhT5dV-o.js";import"./base-url-qR72hEjy.js";const T={class:"flex-none flex flex-col w-80 px-8 py-8 bg-zinc-50"},q={class:"flex-1 basis-1 flex-col text-black gap-1 overflow-y-auto"},D={class:"flex text-black w-full text-xl text-ellipsis pb-4 border-b"},E={class:"pr-2"},P=["src"],Y=o("div",{class:"py-2"},null,-1),K=["onClick"],L={class:"py-2 pr-2 bg-transparent text-black truncate text-ellipsis"},O=o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5 5 1 1 5"},null,-1),Q=[O],W=["onClick"],G={class:"text-left truncate text-ellipsis"},H=S({__name:"CourseNavigationBar",props:{courseInfo:{}},setup(k){const i=k.courseInfo,d=M(),{openedModule:a,activeModuleIndex:u,activeTopicIndex:p}=B(d),{resizeModules:m,toggleModule:_,changeTopic:x}=d;return z(()=>{m(i.modules.length)}),(b,s)=>(n(),r("div",T,[o("div",q,[o("div",D,[o("h1",E,f(t(i).name),1),o("img",{src:t(j)},null,8,P)]),Y,(n(!0),r(y,null,g(t(i).modules,(c,e)=>(n(),r("h2",{key:c.name},[o("button",{type:"button",onClick:l=>t(_)(e),class:"flex justify-between items-center w-full"},[o("span",L,f(c.name),1),(n(),r("svg",{class:w([t(a)[e]?"":"rotate-180","w-3 h-3 shrink-0"]),fill:"none",viewBox:"0 0 10 6"},Q,2))],8,K),o("div",null,[(n(!0),r(y,null,g(c.topics,(l,v)=>(n(),r("button",{key:l.id,class:w(["relative block w-full box-border h-8 px-4 py-1 border-l-2 hover:text-gray-800",[t(u)==e&&t(p)==v?"text-blue-600 border-black":"text-gray-500 border-gray-200",t(a)[e]||t(u)==e&&t(p)==v?"":"hidden"]]),onClick:I=>t(x)(e,v)},[o("p",G,f(l.name),1)],10,W))),128))])]))),128))])]))}}),J={class:"flex flex-col w-full bg-white"},U={key:0},X={key:1},Z={key:2,class:"flex h-full"},ie=S({__name:"CourseContentView",setup(k){const h=M(),{introIndex:i}=B(h),{setCourseInfo:d,setActives:a}=h,u=A(),{isPending:p,isError:m,data:_,error:x}=V({queryKey:[`skill/${u.params.id}`],queryFn:async()=>{const s=await R.getCourseInfoByID(u.params.id.toString());return d(s),b(s),s},refetchOnWindowFocus:!1});async function b(s){var c;for(let e=0;e<s.modules.length;e++){if(i.value!=null){a(e,i.value,0),C.replace({path:`/course/${s.id}/topic/${s.modules[e].topics[i.value].id}`});return}for(let l=0;l<s.modules[e].topics.length;l++)if(s.last_accessed_topic.id==s.modules[e].topics[l].id){a(e,l,(((c=s.last_accessed_topic.last_accessed_step)==null?void 0:c.order)??1)-1),C.replace({path:`/course/${s.id}/topic/${s.last_accessed_topic.id}`});return}}}return(s,c)=>{const e=F("RouterView");return n(),r("div",J,[t(p)?(n(),r("div",U," Pending... ")):t(m)?(n(),r("div",X,f(t(x)),1)):t(_)?(n(),r("div",Z,[$(H,{"course-info":t(_)},null,8,["course-info"]),$(e)])):N("",!0)])}}});export{ie as default};
