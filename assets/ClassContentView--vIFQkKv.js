import{d as D,r as w,e as t,o as _,n as S,g as a,f as e,h as m,m as J,a as R,t as r,k as B,q as U,w as j,c as V,l as h,p as X,D as Y,_ as G,F as P,I as Z,i as W,j as ee,K as ae,L as te}from"./index-D-kQDkLk.js";import{a as Q,u as M}from"./useQuery-BFcJof5I.js";import{u as oe,C as le}from"./dashboard-store-BhreTo-Q.js";import{a as L}from"./api-client-DEVUAY6z.js";import{S as ne}from"./StudentService-BeI2QrZe.js";import"./base-url-qR72hEjy.js";const se={class:"text-h2"},re=D({__name:"ShareClassCode",props:{code:{}},setup(s){const p=s,f=w(!1);return(d,o)=>{const l=t("v-btn"),g=t("v-card"),x=t("v-dialog");return _(),S(x,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=i=>f.value=i),"max-width":"400"},{activator:a(({props:i})=>[e(l,J({class:"self-end",variant:"flat",color:"info","prepend-icon":"mdi-share"},i),{default:a(()=>[m("Class Code")]),_:2},1040)]),default:a(()=>[e(g,{title:"Class CODE",class:"align-center pb-12 pl-12 pr-12 pt-2"},{default:a(()=>[R("div",se,r(p.code),1)]),_:1})]),_:1},8,["modelValue"])}}}),K={async getActiveTeachers(){const s=await L.get("/school/teacher/activelist/");return console.log(s.data),s.data},async addTeacherToClass(s,p){const f=await L.post(`/school/teacher/${s}/addToClass?school_class_id=${p}`);return console.log(f.data),f.data},async removeTeacherFromClass(s,p){return(await L.delete(`/school/teacher/${s}/removeFromClass?school_class_id=${p}`)).data}},de=D({__name:"AddTeacherFormDialog",setup(s){const p=B(),f=Q(),d=w(!1),o=w(!1),l=U(()=>p.params.id.toString()),g=w(null),{data:x,isPending:i}=M({queryKey:["school/teacher/activelist"],queryFn:async()=>await K.getActiveTeachers()}),n=async()=>{if(g.value==null)return alert("pleaseFillInAllFields");o.value=!0;try{console.log(`gradeID.value: ${l.value}`),await K.addTeacherToClass(g.value.toString(),l.value),f.invalidateQueries({queryKey:["class"]}),d.value=!1}catch(c){alert(`failedToAddTeacher: ${c}`)}finally{o.value=!1}};return j(d,c=>{c==!1&&(g.value=null)}),(c,y)=>{const u=t("v-btn"),b=t("v-card-title"),T=t("v-progress-circular"),$=t("v-select"),C=t("v-form"),I=t("v-card-text"),F=t("v-card-actions"),q=t("v-card"),A=t("v-dialog");return _(),V("div",null,[e(u,{color:"green",variant:"flat",onClick:y[0]||(y[0]=k=>d.value=!0)},{default:a(()=>[m(" + "+r("add"))]),_:1}),e(A,{modelValue:d.value,"onUpdate:modelValue":y[3]||(y[3]=k=>d.value=k),"max-width":"600"},{default:a(()=>[e(q,{class:"pa-4"},{default:a(()=>[e(b,{class:"px-2"},{default:a(()=>[m(r("addTeacher"))]),_:1}),e(I,null,{default:a(()=>[h(i)?(_(),S(T,{key:0,color:"primary",indeterminate:""})):(_(),S(C,{key:1,onSubmit:Y(n,["prevent"])},{default:a(()=>[h(x)?(_(),S($,{key:0,modelValue:g.value,"onUpdate:modelValue":y[1]||(y[1]=k=>g.value=k),items:h(x),"item-title":"name","item-value":"id",label:"Select Teacher",outlined:"",required:""},null,8,["modelValue","items"])):X("",!0)]),_:1}))]),_:1}),e(F,null,{default:a(()=>[e(u,{color:"red darken-1",variant:"text",onClick:y[2]||(y[2]=k=>d.value=!1)},{default:a(()=>[m(r("cancel"))]),_:1}),e(u,{loading:o.value,color:"green",variant:"flat",disabled:g.value==null||o.value,onClick:n},{default:a(()=>[m(r("add"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),ie=G(de,[["__scopeId","data-v-d07e95ec"]]),ce=D({__name:"RemoveTeacherFormDialog",props:{id:{}},setup(s){const p=B(),f=s,d=U(()=>p.params.id.toString()),o=w(!1),l=w(!1),g=Q();async function x(){l.value=!0;try{console.log(`gradeID.value: ${d.value}`),await K.removeTeacherFromClass(f.id.toString(),d.value),g.invalidateQueries({queryKey:["class"]}),o.value=!1}catch(i){alert(`failedToDeleteClass: ${i}`)}finally{l.value=!1}}return(i,n)=>{const c=t("v-btn"),y=t("v-card-title"),u=t("v-card-text"),b=t("v-card"),T=t("v-card-actions"),$=t("v-dialog");return _(),V(P,null,[e(c,{"prepend-icon":"mdi-delete",variant:"plain",loading:l.value,disabled:l.value,onClick:n[0]||(n[0]=()=>{o.value=!0})},null,8,["loading","disabled"]),e($,{modelValue:o.value,"onUpdate:modelValue":n[3]||(n[3]=C=>o.value=C),"max-width":"600"},{default:a(()=>[e(b,{class:"pa-4"},{default:a(()=>[e(y,{class:"px-2"},{default:a(()=>[m(r("removeTeacher")+"?")]),_:1}),e(b,{class:"ma-2",color:"yellow",variant:"tonal"},{default:a(()=>[e(u,{class:"text-medium-emphasis text-lg"},{default:a(()=>[m(r("warningAllHisProgressDataWillBeRemovedPermanently"))]),_:1})]),_:1}),e(T,null,{default:a(()=>[e(c,{color:"green darken-1",variant:"text",onClick:n[1]||(n[1]=C=>o.value=!1)},{default:a(()=>[m(r("cancel"))]),_:1}),e(c,{loading:l.value,color:"red",variant:"flat",disabled:l.value,onClick:n[2]||(n[2]=C=>x())},{default:a(()=>[m(r("remove"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),ue=D({__name:"RemoveStudentFormDialog",props:{id:{}},setup(s){const p=B(),f=s,d=U(()=>p.params.id.toString()),o=w(!1),l=w(!1),g=Q();async function x(){l.value=!0;try{console.log(`gradeID.value: ${d.value}`),await ne.removeStudentFromClass(f.id.toString(),d.value),g.invalidateQueries({queryKey:["class"]}),o.value=!1}catch(i){alert(`failedToDeleteClass: ${i}`)}finally{l.value=!1}}return(i,n)=>{const c=t("v-btn"),y=t("v-card-title"),u=t("v-card-text"),b=t("v-card"),T=t("v-card-actions"),$=t("v-dialog");return _(),V(P,null,[e(c,{"prepend-icon":"mdi-delete",variant:"plain",loading:l.value,disabled:l.value,onClick:n[0]||(n[0]=()=>{o.value=!0})},null,8,["loading","disabled"]),e($,{modelValue:o.value,"onUpdate:modelValue":n[3]||(n[3]=C=>o.value=C),"max-width":"600"},{default:a(()=>[e(b,{class:"pa-4"},{default:a(()=>[e(y,{class:"px-2"},{default:a(()=>[m(r("removeStudent")+"?")]),_:1}),e(b,{class:"ma-2",color:"yellow",variant:"tonal"},{default:a(()=>[e(u,{class:"text-medium-emphasis text-lg"},{default:a(()=>[m(r("warningAllHisProgressDataWillBeRemovedPermanently"))]),_:1})]),_:1}),e(T,null,{default:a(()=>[e(c,{color:"green darken-1",variant:"text",onClick:n[1]||(n[1]=C=>o.value=!1)},{default:a(()=>[m(r("cancel"))]),_:1}),e(c,{loading:l.value,color:"red",variant:"flat",disabled:l.value,onClick:n[2]||(n[2]=C=>x())},{default:a(()=>[m(r("remove"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),N=s=>(ae("data-v-a42f73bf"),s=s(),te(),s),ve={key:1},_e={key:2},me=N(()=>R("br",null,null,-1)),pe=N(()=>R("br",null,null,-1)),fe=N(()=>R("div",{class:"text-body-1 mr-4"},"375xp",-1)),ge=D({__name:"ClassContentView",setup(s){const p=B(),f=oe(),{classes:d}=Z(f),o=w(p.params.id.toString()),l=w(null),{isPending:g,isError:x,data:i,error:n,refetch:c}=M({queryKey:["class",o.value],queryFn:async()=>{const u=await le.getClassByID(o.value);return l.value=u,u}});j(()=>p.params.id,u=>{o.value=u.toString(),c()});function y(u){ee.replace({path:`/dashboard/class/${u}`})}return(u,b)=>{const T=t("v-select"),$=t("v-skeleton-loader"),C=t("v-divider"),I=t("v-avatar"),F=t("v-list-item-title"),q=t("v-list-item"),A=t("v-card"),k=t("v-btn"),O=t("RouterLink"),z=t("v-col");return _(),S(z,{style:{"min-width":"300px","max-width":"100%"}},{default:a(()=>{var E;return[e(T,{modelValue:l.value,"onUpdate:modelValue":[b[0]||(b[0]=v=>l.value=v),y],class:"d-inline-flex",label:"Class",items:h(d),"item-title":"name","item-value":"id"},null,8,["modelValue","items"]),h(g)?(_(),S($,{key:0,type:"list-item-two-line"})):h(x)?(_(),V("div",ve,r((E=h(n))==null?void 0:E.message),1)):(_(),V("div",_e,[me,e(A,{title:"Teachers",class:"pa-4 border-sm rounded-lg",variant:"flat"},{append:a(()=>[e(ie)]),default:a(()=>[e(C,{class:"border-opacity-100 my-2",color:"error"}),(_(!0),V(P,null,W(h(i).teachers,v=>(_(),S(q,{key:v.id,color:"primary",rounded:"shaped"},{prepend:a(()=>[e(I,{color:"grey",image:v.image||""},null,8,["image"])]),append:a(()=>[e(ce,{id:v.id},null,8,["id"])]),default:a(()=>[e(F,{textContent:r(v.name)},null,8,["textContent"])]),_:2},1024))),128))]),_:1}),pe,e(A,{title:"Students",class:"pa-4 border-sm rounded-lg",variant:"flat"},{append:a(()=>{var v,H;return[e(O,{to:{name:"students-progress-view",params:{id:(v=h(i))==null?void 0:v.id}}},{default:a(()=>[e(k,{class:"self-end mr-4",variant:"flat",color:"warning","prepend-icon":"mdi-stairs"},{default:a(()=>[m("Progress")]),_:1})]),_:1},8,["to"]),e(re,{code:((H=l.value)==null?void 0:H.code)??""},null,8,["code"])]}),default:a(()=>[e(C,{class:"border-opacity-100 my-2",color:"error"}),(_(!0),V(P,null,W(h(i).students,v=>(_(),S(q,{key:v.id,color:"primary",rounded:"shaped"},{prepend:a(()=>[e(I,{color:"grey",image:v.image||""},null,8,["image"])]),append:a(()=>[fe,e(k,{to:{name:"student-profile-view",params:{id:v.id}},class:"mx-4",variant:"tonal","append-icon":"mdi-page-next-outline"},{default:a(()=>[m("profile")]),_:2},1032,["to"]),e(ue,{id:v.id},null,8,["id"])]),default:a(()=>[e(F,{textContent:r(v.name)},null,8,["textContent"])]),_:2},1024))),128))]),_:1})]))]}),_:1})}}}),ke=G(ge,[["__scopeId","data-v-a42f73bf"]]);export{ke as default};
